[{"path":"https://emf-creaf.github.io/meteospain/CONTRIBUTING.html","id":null,"dir":"","previous_headings":"","what":"Contributing to meteospain","title":"Contributing to meteospain","text":"outlines propose change meteospain.","code":""},{"path":"https://emf-creaf.github.io/meteospain/CONTRIBUTING.html","id":"bigger-changes","dir":"","previous_headings":"","what":"Bigger changes","title":"Contributing to meteospain","text":"want make bigger change, ’s good idea first file issue make sure someone team agrees ’s needed. ’ve found bug, please file issue illustrates bug minimal reprex (also help write unit test, needed).","code":""},{"path":"https://emf-creaf.github.io/meteospain/CONTRIBUTING.html","id":"pull-request-process","dir":"","previous_headings":"Bigger changes","what":"Pull request process","title":"Contributing to meteospain","text":"Fork package clone onto computer. haven’t done , recommend using usethis::create_from_github(\"emf-creaf/meteospain\", fork = TRUE). Install development dependences devtools::install_dev_deps(), make sure package passes R CMD check running devtools::check(). R CMD check doesn’t pass cleanly, ’s good idea ask help continuing. passing tests building vignettes, need API keys AEMET MeteoCat (see ?services_options). workaround develop without keys setting NOT_CRAN environment variable false (Sys.setenv(NOT_CRAN = 'false')), , tests examples run building, testing checking. Create Git branch pull request (PR). recommend using usethis::pr_init(\"brief-description--change\"). Make changes, commit git, create PR running usethis::pr_push(), following prompts browser. title PR briefly describe change. body PR contain Fixes #issue-number. user-facing changes, add bullet top NEWS.md (.e. just first header). Follow style described https://style.tidyverse.org/news.html.","code":""},{"path":"https://emf-creaf.github.io/meteospain/CONTRIBUTING.html","id":"code-style","dir":"","previous_headings":"Bigger changes","what":"Code style","title":"Contributing to meteospain","text":"use roxygen2, Markdown syntax, documentation. use testthat unit tests. Contributions test cases included easier accept.","code":""},{"path":"https://emf-creaf.github.io/meteospain/CONTRIBUTING.html","id":"dependencies","dir":"","previous_headings":"Bigger changes","what":"Dependencies","title":"Contributing to meteospain","text":"interaction meteorological API must done httr /jsonlite /xml2, already dependencies meteospain. See DESCRIPTION file list available dependencies.","code":""},{"path":"https://emf-creaf.github.io/meteospain/CONTRIBUTING.html","id":"service-code-guide","dir":"","previous_headings":"","what":"Service code guide","title":"Contributing to meteospain","text":"adding new service meteospain, conventions follow:","code":""},{"path":"https://emf-creaf.github.io/meteospain/CONTRIBUTING.html","id":"helpers","dir":"","previous_headings":"Service code guide","what":"Helpers","title":"Contributing to meteospain","text":"service R file associated, [service_name]_helpers.R. file put helpers needed access service API: .create_[service]_path(api_options): build vector path, usually depending temporal resolution. .create_[service]_query(api_options): APIs need parameters supplied queries. .check_status_[service](api_options): logic check response statuses (200, 429, 500…). .get_info_[service](api_options): Access, transform return stations info metadata. .get_data_[service](api_options): Access, transform return data based api options provided (temporal resolution, stations…). function use .create_* .check_status_[service] helpers. Data must transformed sf, adding stations metadata. Numerical data must converted units variables names standardized among services.","code":""},{"path":"https://emf-creaf.github.io/meteospain/CONTRIBUTING.html","id":"options","dir":"","previous_headings":"Service code guide","what":"Options","title":"Contributing to meteospain","text":"service must dedicated function create API options, [service]_options. function control parameters needed: resolution: Temporal resolution data (hourly, daily…), used build paths, queries… start_date: Starting date desired data, used build paths, queries…. API accepts one date (see MeteoCat example), use one. end_date: End date desired data, used build paths, queries…. API accepts one date, argument necessary. stations: Character vector stations IDs use paths queries retrieving data filters . NOTE: API accepts one station querying stations, path obtain stations, one must used desired stations filtered afterwards. way reduce calls API, dont need create loop return every station stations argument. path exists getting data stations, loop used. api_key: API needs key, add argument user supply key. NOTE: meteospain store encrypt way supplied key. user responsability manage keys. recommend keyring package docs functions help.","code":""},{"path":"https://emf-creaf.github.io/meteospain/CONTRIBUTING.html","id":"tests","dir":"","previous_headings":"Service code guide","what":"Tests","title":"Contributing to meteospain","text":"tests/testthat/test-concordance_between_services.R adds tests joining data services. tests/testthat/test-[service].R adds tests service. utils.R helper function main test battery applied service: main_test_battery(). See examples use test files services already implemented.","code":""},{"path":"https://emf-creaf.github.io/meteospain/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"MIT License","title":"MIT License","text":"Copyright (c) 2021 meteospain authors Permission hereby granted, free charge, person obtaining copy software associated documentation files (“Software”), deal Software without restriction, including without limitation rights use, copy, modify, merge, publish, distribute, sublicense, /sell copies Software, permit persons Software furnished , subject following conditions: copyright notice permission notice shall included copies substantial portions Software. SOFTWARE PROVIDED “”, WITHOUT WARRANTY KIND, EXPRESS IMPLIED, INCLUDING LIMITED WARRANTIES MERCHANTABILITY, FITNESS PARTICULAR PURPOSE NONINFRINGEMENT. EVENT SHALL AUTHORS COPYRIGHT HOLDERS LIABLE CLAIM, DAMAGES LIABILITY, WHETHER ACTION CONTRACT, TORT OTHERWISE, ARISING , CONNECTION SOFTWARE USE DEALINGS SOFTWARE.","code":""},{"path":"https://emf-creaf.github.io/meteospain/articles/aemet.html","id":"aemet-service","dir":"Articles","previous_headings":"","what":"AEMET service","title":"AEMET service","text":"AEMET Spanish national meteorologic service, national meteorology authority providing quality data public research use, well prediction products disaster warning system. meteospain access automatic meteorological stations network data.","code":""},{"path":[]},{"path":"https://emf-creaf.github.io/meteospain/articles/aemet.html","id":"temporal-resolution","dir":"Articles","previous_headings":"AEMET service > AEMET options","what":"Temporal resolution","title":"AEMET service","text":"meteospain offers access AEMET API different temporal resolutions: “current_day”, returning latest 24 hours measures selected stations. “daily”, returning daily aggregated measures selected stations. “monthly”, returning monthly aggregated measures one station. “yearly”, returning yearly aggregated measures one station. “daily”, start_date (optionally end_date) arguments must provided, indicating period retrieve data. “monthly” “yearly”, years start_date end_date used, returning year monthly yearly values (.e start_date = .Date(\"2020-12-01\") start_date = .Date(\"2020-01-01\") return 2020 measures).","code":""},{"path":"https://emf-creaf.github.io/meteospain/articles/aemet.html","id":"stations","dir":"Articles","previous_headings":"AEMET service > AEMET options","what":"Stations","title":"AEMET service","text":"meteospain access data AEMET API collecting stations. character vector stations codes supplied stations argument, filter step done returning data maintain stations supplied. exception “monthly” “yearly” temporal resolutions. AEMET API allows one station retrieved.","code":""},{"path":"https://emf-creaf.github.io/meteospain/articles/aemet.html","id":"aemet-api-key","dir":"Articles","previous_headings":"AEMET service > AEMET options","what":"AEMET API Key","title":"AEMET service","text":"AEMET API allow access data personal API Key. token must included api_key argument aemet_options function. obtain API Key, please visit https://opendata.aemet.es/centrodedescargas/inicio follow instructions “Obtencion de API Key”. advisable use keys directly script shared publicly available (github…), neither store plain text files. One option using keyring package managing accessing keys:","code":"install.packages('keyring') library(keyring) key_set('aemet') # A prompt asking for the secret (the API Key) will appear."},{"path":"https://emf-creaf.github.io/meteospain/articles/aemet.html","id":"examples","dir":"Articles","previous_headings":"AEMET service > AEMET options","what":"Examples","title":"AEMET service","text":"","code":"# current day, all stations api_options <- aemet_options(   resolution = 'current_day',   api_key = key_get('aemet') ) api_options #> $resolution #> [1] \"current_day\" #>  #> $start_date #> [1] \"2025-10-01\" #>  #> $end_date #> [1] \"2025-10-01\" #>  #> $stations #> NULL #>  #> $api_key #> [1] \"my_api_key\" # daily, all stations api_options <- aemet_options(   resolution = 'daily',   start_date = as.Date('2020-04-25'), end_date = as.Date('2020-05-08'),   api_key = key_get('aemet') ) api_options #> $resolution #> [1] \"daily\" #>  #> $start_date #> [1] \"2020-04-25\" #>  #> $end_date #> [1] \"2020-05-08\" #>  #> $stations #> NULL #>  #> $api_key #> [1] \"my_api_key\" # monthly, only one station because AEMET API limitations api_options <- aemet_options(   resolution = 'monthly',   start_date = as.Date('2020-04-25'), end_date = as.Date('2020-05-25'),   station = \"0149X\",   api_key = key_get('aemet') ) api_options #> $resolution #> [1] \"monthly\" #>  #> $start_date #> [1] \"2020-01-01\" #>  #> $end_date #> [1] \"2020-12-31\" #>  #> $stations #> [1] \"0149X\" #>  #> $api_key #> [1] \"my_api_key\""},{"path":"https://emf-creaf.github.io/meteospain/articles/aemet.html","id":"aemet-stations-info","dir":"Articles","previous_headings":"AEMET service","what":"AEMET stations info","title":"AEMET service","text":"Accessing station metadata AEMET simple:","code":"get_stations_info_from('aemet', api_options) #> Simple feature collection with 947 features and 5 fields #> Geometry type: POINT #> Dimension:     XY #> Bounding box:  xmin: -18.115 ymin: 27.66528 xmax: 4.323889 ymax: 43.78611 #> Geodetic CRS:  WGS 84 #> # A tibble: 947 × 6 #>    service station_id station_name               station_province altitude #>  * <chr>   <chr>      <chr>                      <chr>                 [m] #>  1 aemet   B051A      SÓLLER, PUERTO             ILLES BALEARS           5 #>  2 aemet   B087X      BANYALBUFAR                ILLES BALEARS          60 #>  3 aemet   B013X      ESCORCA, LLUC              ILLES BALEARS         490 #>  4 aemet   B103B      ANDRATX - SANT ELM         ILLES BALEARS          52 #>  5 aemet   B158X      CALVIÀ, ES CAPDELLÀ        ILLES BALEARS          50 #>  6 aemet   B275E      SON BONET, AEROPUERTO      BALEARES               47 #>  7 aemet   B236C      PALMA, UNIVERSITAT         ILLES BALEARS          95 #>  8 aemet   B228       PALMA, PUERTO              ILLES BALEARS           3 #>  9 aemet   B248       SIERRA DE ALFABIA, BUNYOLA ILLES BALEARS        1030 #> 10 aemet   B334X      LLUCMAJOR                  ILLES BALEARS         140 #> # ℹ 937 more rows #> # ℹ 1 more variable: geometry <POINT [°]>"},{"path":"https://emf-creaf.github.io/meteospain/articles/aemet.html","id":"aemet-data","dir":"Articles","previous_headings":"AEMET service","what":"AEMET data","title":"AEMET service","text":"Visually:","code":"api_options <- aemet_options(   resolution = 'daily',   start_date = as.Date('2020-04-25'),   api_key = key_get('aemet') ) spain_20200425 <- get_meteo_from('aemet', options = api_options) #> ℹ © AEMET. Autorizado el uso de la información y su reproducción citando a #>   AEMET como autora de la misma. #> https://www.aemet.es/es/nota_legal spain_20200425 #> Simple feature collection with 769 features and 19 fields #> Geometry type: POINT #> Dimension:     XY #> Bounding box:  xmin: -18.115 ymin: 27.71889 xmax: 4.323889 ymax: 43.78611 #> Geodetic CRS:  WGS 84 #> # A tibble: 769 × 20 #>    timestamp           service station_id station_name station_province altitude #>  * <dttm>              <chr>   <chr>      <chr>        <chr>                 [m] #>  1 2020-04-25 00:00:00 aemet   0009X      ALFORJA      TARRAGONA             406 #>  2 2020-04-25 00:00:00 aemet   0016A      REUS AEROPU… TARRAGONA              71 #>  3 2020-04-25 00:00:00 aemet   0016B      REUS (CENTR… TARRAGONA             118 #>  4 2020-04-25 00:00:00 aemet   0034X      VALLS        TARRAGONA             233 #>  5 2020-04-25 00:00:00 aemet   0061X      PONTONS      BARCELONA             632 #>  6 2020-04-25 00:00:00 aemet   0073X      SITGES       BARCELONA              58 #>  7 2020-04-25 00:00:00 aemet   0076       BARCELONA A… BARCELONA               4 #>  8 2020-04-25 00:00:00 aemet   0092X      BERGA        BARCELONA             682 #>  9 2020-04-25 00:00:00 aemet   0106X      BALSARENY    BARCELONA             361 #> 10 2020-04-25 00:00:00 aemet   0114X      PRATS DE LL… BARCELONA             700 #> # ℹ 759 more rows #> # ℹ 14 more variables: mean_temperature [°C], min_temperature [°C], #> #   max_temperature [°C], mean_relative_humidity [%], #> #   min_relative_humidity [%], max_relative_humidity [%], #> #   precipitation [L/m^2], wind_direction [°], mean_wind_speed [m/s], #> #   max_wind_speed [m/s], insolation [h], max_atmospheric_pressure [hPa], #> #   min_atmospheric_pressure [hPa], geometry <POINT [°]> spain_20200425 |>   units::drop_units() |>   ggplot() +   geom_sf(aes(colour = mean_temperature)) +   scale_colour_viridis_c() spain_20200425 |>   ggplot() +   geom_histogram(aes(x = precipitation)) #> `stat_bin()` using `bins = 30`. Pick better value `binwidth`. #> Warning: Removed 32 rows containing non-finite outside the scale range #> (`stat_bin()`)."},{"path":"https://emf-creaf.github.io/meteospain/articles/api_limits.html","id":"aemet-api","dir":"Articles","previous_headings":"","what":"AEMET API","title":"API limits and loops","text":"AEMET API limit daily data download 15 days, monthly yearly data 36 months: means one call get_meteo_from AEMET service, one can download 15 days data, (36 months monthly yearly data). period needed bigger , one option performing calls necessary join results: short periods can easily done, needing long periods (years, decades), can tedious prone error (least involves lot copy&paste generate longer scripts). avoid , can use loops, tidyverse way (purrr::map) classic approach (). ways, first thing create vectors dates retrieve:","code":"# aemet api has a limit for 15 days in daily: get_meteo_from(   'aemet',   aemet_options(     api_key = keyring::key_get('aemet'),     resolution = 'daily',     start_date = as.Date('1990-01-01'),     end_date = as.Date('1990-12-31')   ) ) #> Error in `api_function()`: #> ✖ 404 #> ℹ AEMET API returned no data: El rango de fechas no puede ser superior a 15 #>   dias  # and monthly and yearly data to 36 months get_meteo_from(   'aemet',   aemet_options(     api_key = keyring::key_get('aemet'),     resolution = 'yearly',     start_date = as.Date('2005-01-01'),     end_date = as.Date('2020-12-31'),     stations = \"0149X\"   ) ) #> Error in `api_function()`: #> ✖ 404 #> ℹ AEMET API returned no data: El rango de las fechas no puede ser superior a 36 #>   mesess res_1990_jan_1 <- get_meteo_from(   'aemet',   aemet_options(     api_key = keyring::key_get('aemet'),     resolution = 'daily',     start_date = as.Date('1990-01-01'),     end_date = as.Date('1990-01-15')   ) ) #> ℹ © AEMET. Autorizado el uso de la información y su reproducción citando a #>   AEMET como autora de la misma. #> https://www.aemet.es/es/nota_legal  res_1990_jan_2 <- get_meteo_from(   'aemet',   aemet_options(     api_key = keyring::key_get('aemet'),     resolution = 'daily',     start_date = as.Date('1990-01-16'),     end_date = as.Date('1990-01-31')   ) ) #> ℹ © AEMET. Autorizado el uso de la información y su reproducción citando a #>   AEMET como autora de la misma. #> https://www.aemet.es/es/nota_legal  res_1990_jan <- rbind(res_1990_jan_1, res_1990_jan_2) res_1990_jan #> Simple feature collection with 4664 features and 19 fields #> Geometry type: POINT #> Dimension:     XY #> Bounding box:  xmin: -18.115 ymin: 27.72528 xmax: 4.215556 ymax: 43.65111 #> Geodetic CRS:  WGS 84 #> # A tibble: 4,664 × 20 #>    timestamp           service station_id station_name station_province altitude #>  * <dttm>              <chr>   <chr>      <chr>        <chr>                 [m] #>  1 1990-01-01 00:00:00 aemet   0002I      \"VANDELLÒS … TARRAGONA              32 #>  2 1990-01-01 00:00:00 aemet   0016A      \"REUS AEROP… TARRAGONA              71 #>  3 1990-01-01 00:00:00 aemet   0016B      \"REUS (CENT… TARRAGONA             118 #>  4 1990-01-01 00:00:00 aemet   0076       \"BARCELONA … BARCELONA               4 #>  5 1990-01-01 00:00:00 aemet   0149D      \"MANRESA (L… BARCELONA             291 #>  6 1990-01-01 00:00:00 aemet   0158O      \"MONTSERRAT\" BARCELONA             738 #>  7 1990-01-01 00:00:00 aemet   0200E      \"BARCELONA,… BARCELONA             408 #>  8 1990-01-01 00:00:00 aemet   0229I      \"SABADELL A… BARCELONA             146 #>  9 1990-01-01 00:00:00 aemet   0294B      \"LA BISBAL … GIRONA                 51 #> 10 1990-01-01 00:00:00 aemet   0321       \"CAMPDEVANO… GIRONA                731 #> # ℹ 4,654 more rows #> # ℹ 14 more variables: mean_temperature [°C], min_temperature [°C], #> #   max_temperature [°C], mean_relative_humidity [%], #> #   min_relative_humidity [%], max_relative_humidity [%], #> #   precipitation [L/m^2], wind_direction [°], mean_wind_speed [m/s], #> #   max_wind_speed [m/s], insolation [h], max_atmospheric_pressure [hPa], #> #   min_atmospheric_pressure [hPa], geometry <POINT [°]> # First, we prepare the date vectors, with the start and end dates. start_dates <- seq(as.Date('1990-01-01'), as.Date('1990-07-01'), '15 days') end_dates <- seq(as.Date('1990-01-15'), as.Date('1990-07-15'), '15 days')  # Both vectors must have the same length length(start_dates) == length(end_dates) #> [1] TRUE  # lets see them data.frame(start_dates, end_dates) #>    start_dates  end_dates #> 1   1990-01-01 1990-01-15 #> 2   1990-01-16 1990-01-30 #> 3   1990-01-31 1990-02-14 #> 4   1990-02-15 1990-03-01 #> 5   1990-03-02 1990-03-16 #> 6   1990-03-17 1990-03-31 #> 7   1990-04-01 1990-04-15 #> 8   1990-04-16 1990-04-30 #> 9   1990-05-01 1990-05-15 #> 10  1990-05-16 1990-05-30 #> 11  1990-05-31 1990-06-14 #> 12  1990-06-15 1990-06-29 #> 13  1990-06-30 1990-07-14"},{"path":"https://emf-creaf.github.io/meteospain/articles/api_limits.html","id":"tidyverse-loop","dir":"Articles","previous_headings":"AEMET API","what":"tidyverse loop","title":"API limits and loops","text":"gonna use purrr::map2, iterate date vectors time return data frame results directly:","code":"# tidyverse map res_tidyverse <-   purrr::map2(     .x = start_dates, .y = end_dates,     .f = function(start_date, end_date) {       res <- get_meteo_from(         'aemet',         aemet_options(           api_key = keyring::key_get('aemet'),           resolution = 'daily',           start_date = start_date,           end_date = end_date         )       )       return(res)     }   ) |>   purrr::list_rbind() #> ℹ © AEMET. Autorizado el uso de la información y su reproducción citando a #>   AEMET como autora de la misma. #> https://www.aemet.es/es/nota_legal #> ℹ © AEMET. Autorizado el uso de la información y su reproducción citando a #>   AEMET como autora de la misma. #> https://www.aemet.es/es/nota_legal #> ℹ © AEMET. Autorizado el uso de la información y su reproducción citando a #>   AEMET como autora de la misma. #> https://www.aemet.es/es/nota_legal #> ℹ © AEMET. Autorizado el uso de la información y su reproducción citando a #>   AEMET como autora de la misma. #> https://www.aemet.es/es/nota_legal #> ℹ © AEMET. Autorizado el uso de la información y su reproducción citando a #>   AEMET como autora de la misma. #> https://www.aemet.es/es/nota_legal #> ℹ © AEMET. Autorizado el uso de la información y su reproducción citando a #>   AEMET como autora de la misma. #> https://www.aemet.es/es/nota_legal #> ℹ © AEMET. Autorizado el uso de la información y su reproducción citando a #>   AEMET como autora de la misma. #> https://www.aemet.es/es/nota_legal #> ℹ API request limit reached: Client error: (429) Too Many Requests (RFC 6585) #> Trying again in 60 seconds (retry 1 of 3) #> ℹ © AEMET. Autorizado el uso de la información y su reproducción citando a #>   AEMET como autora de la misma. #> https://www.aemet.es/es/nota_legal #> ℹ © AEMET. Autorizado el uso de la información y su reproducción citando a #>   AEMET como autora de la misma. #> https://www.aemet.es/es/nota_legal #> ℹ © AEMET. Autorizado el uso de la información y su reproducción citando a #>   AEMET como autora de la misma. #> https://www.aemet.es/es/nota_legal #> ℹ © AEMET. Autorizado el uso de la información y su reproducción citando a #>   AEMET como autora de la misma. #> https://www.aemet.es/es/nota_legal #> ℹ © AEMET. Autorizado el uso de la información y su reproducción citando a #>   AEMET como autora de la misma. #> https://www.aemet.es/es/nota_legal  head(res_tidyverse) #>    timestamp service station_id          station_name station_province altitude #> 1 1990-01-01   aemet      0002I           VANDELLÒS          TARRAGONA   32 [m] #> 2 1990-01-01   aemet      0016A       REUS AEROPUERTO        TARRAGONA   71 [m] #> 3 1990-01-01   aemet      0016B REUS (CENTRE LECTURA)        TARRAGONA  118 [m] #> 4 1990-01-01   aemet       0076  BARCELONA AEROPUERTO        BARCELONA    4 [m] #> 5 1990-01-01   aemet      0149D    MANRESA (LA CULLA)        BARCELONA  291 [m] #> 6 1990-01-01   aemet      0158O            MONTSERRAT        BARCELONA  738 [m] #>   mean_temperature min_temperature max_temperature mean_relative_humidity #> 1        11.2 [°C]        8.8 [°C]       13.7 [°C]                 80 [%] #> 2         9.0 [°C]        5.4 [°C]       12.6 [°C]                 89 [%] #> 3        10.1 [°C]        8.4 [°C]       11.8 [°C]                 82 [%] #> 4         9.2 [°C]        4.0 [°C]       14.4 [°C]                 74 [%] #> 5         5.0 [°C]       -1.5 [°C]       11.6 [°C]                 69 [%] #> 6         7.0 [°C]        3.0 [°C]       11.0 [°C]                 NA [%] #>   min_relative_humidity max_relative_humidity precipitation wind_direction #> 1                NA [%]                NA [%]     0 [L/m^2]         30 [°] #> 2                NA [%]                NA [%]     0 [L/m^2]         99 [°] #> 3                NA [%]                NA [%]     0 [L/m^2]         NA [°] #> 4                NA [%]                NA [%]     0 [L/m^2]         NA [°] #> 5                NA [%]                NA [%]     0 [L/m^2]         22 [°] #> 6                NA [%]                NA [%]     0 [L/m^2]         NA [°] #>   mean_wind_speed max_wind_speed insolation max_atmospheric_pressure #> 1       1.7 [m/s]      6.4 [m/s]    0.1 [h]                 NA [hPa] #> 2       0.6 [m/s]      5.0 [m/s]    0.1 [h]                 NA [hPa] #> 3       0.6 [m/s]       NA [m/s]    0.2 [h]                 NA [hPa] #> 4       3.6 [m/s]       NA [m/s]    6.7 [h]                 NA [hPa] #> 5       0.8 [m/s]      3.9 [m/s]    7.8 [h]                 NA [hPa] #> 6        NA [m/s]       NA [m/s]     NA [h]                 NA [hPa] #>   min_atmospheric_pressure                   geometry #> 1                 NA [hPa] POINT (0.8713889 40.95806) #> 2                 NA [hPa]    POINT (1.163611 41.145) #> 3                 NA [hPa]  POINT (1.108889 41.15417) #> 4                 NA [hPa]      POINT (2.07 41.29278) #> 5                 NA [hPa]     POINT (1.840278 41.72) #> 6                 NA [hPa]  POINT (1.839167 41.59444)"},{"path":"https://emf-creaf.github.io/meteospain/articles/api_limits.html","id":"for-loop","dir":"Articles","previous_headings":"AEMET API","what":"for loop","title":"API limits and loops","text":"use base::, iterating index dates vectors: methods return identical results: loop, matter purrr::map loop, iteration connect API, consuming connections user quota. Take consideration creating loops longer periods, can reach API request limits day/month… (depends service API).","code":"# base for loop res_for <- data.frame()  for (index in seq_along(start_dates)) {   temp_res <- get_meteo_from(     'aemet',     aemet_options(       api_key = keyring::key_get('aemet'),       resolution = 'daily',       start_date = start_dates[index],       end_date = end_dates[index]     )   )      res_for <- rbind(res_for, temp_res) }  head(res_for) #> Simple feature collection with 6 features and 19 fields #> Geometry type: POINT #> Dimension:     XY #> Bounding box:  xmin: 0.8713889 ymin: 40.95806 xmax: 2.07 ymax: 41.72 #> Geodetic CRS:  WGS 84 #> # A tibble: 6 × 20 #>   timestamp           service station_id station_name  station_province altitude #>   <dttm>              <chr>   <chr>      <chr>         <chr>                 [m] #> 1 1990-01-01 00:00:00 aemet   0002I      \"VANDELLÒS  \" TARRAGONA              32 #> 2 1990-01-01 00:00:00 aemet   0016A      \"REUS AEROPU… TARRAGONA              71 #> 3 1990-01-01 00:00:00 aemet   0016B      \"REUS (CENTR… TARRAGONA             118 #> 4 1990-01-01 00:00:00 aemet   0076       \"BARCELONA A… BARCELONA               4 #> 5 1990-01-01 00:00:00 aemet   0149D      \"MANRESA (LA… BARCELONA             291 #> 6 1990-01-01 00:00:00 aemet   0158O      \"MONTSERRAT\"  BARCELONA             738 #> # ℹ 14 more variables: mean_temperature [°C], min_temperature [°C], #> #   max_temperature [°C], mean_relative_humidity [%], #> #   min_relative_humidity [%], max_relative_humidity [%], #> #   precipitation [L/m^2], wind_direction [°], mean_wind_speed [m/s], #> #   max_wind_speed [m/s], insolation [h], max_atmospheric_pressure [hPa], #> #   min_atmospheric_pressure [hPa], geometry <POINT [°]> # both are identical identical(res_tidyverse, res_for) #> [1] FALSE"},{"path":"https://emf-creaf.github.io/meteospain/articles/api_limits.html","id":"meteocat-api","dir":"Articles","previous_headings":"","what":"MeteoCat API","title":"API limits and loops","text":"using MeteoCat daily, monthly yearly restrictions period can accessed.","code":""},{"path":"https://emf-creaf.github.io/meteospain/articles/api_limits.html","id":"daily","dir":"Articles","previous_headings":"MeteoCat API","what":"daily","title":"API limits and loops","text":"daily always returns whole month date selected , .e. start_date = .Date('2020-04-10') return days April, 2020: means want one month, need use loops similar way described previously AEMET:","code":"api_options <- meteocat_options(   'daily', start_date = as.Date('2020-04-10'),   api_key = keyring::key_get('meteocat') ) april_2020 <- get_meteo_from('meteocat', api_options) #> ℹ Data provided by meteo.cat © Servei Meteorològic de Catalunya #> https://www.meteo.cat/wpweb/avis-legal/#info unique(april_2020$timestamp) #>  [1] \"2020-04-01 UTC\" \"2020-04-02 UTC\" \"2020-04-03 UTC\" \"2020-04-04 UTC\" #>  [5] \"2020-04-05 UTC\" \"2020-04-06 UTC\" \"2020-04-07 UTC\" \"2020-04-08 UTC\" #>  [9] \"2020-04-09 UTC\" \"2020-04-10 UTC\" \"2020-04-11 UTC\" \"2020-04-12 UTC\" #> [13] \"2020-04-13 UTC\" \"2020-04-14 UTC\" \"2020-04-15 UTC\" \"2020-04-16 UTC\" #> [17] \"2020-04-17 UTC\" \"2020-04-18 UTC\" \"2020-04-19 UTC\" \"2020-04-20 UTC\" #> [21] \"2020-04-21 UTC\" \"2020-04-22 UTC\" \"2020-04-23 UTC\" \"2020-04-24 UTC\" #> [25] \"2020-04-25 UTC\" \"2020-04-26 UTC\" \"2020-04-27 UTC\" \"2020-04-28 UTC\" #> [29] \"2020-04-29 UTC\" \"2020-04-30 UTC\" start_dates <- seq(as.Date('2020-01-01'), as.Date('2020-04-01'), 'months') # tidyverse map meteocat_2020q1_tidyverse <-   purrr::map(     .x = start_dates,     .f = function(start_date) {       res <- get_meteo_from(         'meteocat',         meteocat_options(           api_key = keyring::key_get('meteocat'),           resolution = 'daily',           start_date = start_date         )       )       return(res)     }   ) |>   purrr::list_rbind() #> ℹ Data provided by meteo.cat © Servei Meteorològic de Catalunya #> https://www.meteo.cat/wpweb/avis-legal/#info #> ℹ Data provided by meteo.cat © Servei Meteorològic de Catalunya #> https://www.meteo.cat/wpweb/avis-legal/#info #> ℹ Data provided by meteo.cat © Servei Meteorològic de Catalunya #> https://www.meteo.cat/wpweb/avis-legal/#info  head(meteocat_2020q1_tidyverse) #>    timestamp  service station_id                station_name station_province #> 1 2020-01-01 meteocat         C6         Castellnou de Seana           Lleida #> 2 2020-01-01 meteocat         C7                     Tàrrega           Lleida #> 3 2020-01-01 meteocat         C8                     Cervera           Lleida #> 4 2020-01-01 meteocat         C9            Mas de Barberans        Tarragona #> 5 2020-01-01 meteocat         CC                        Orís        Barcelona #> 6 2020-01-01 meteocat         CD la Seu d'Urgell - Bellestar           Lleida #>   altitude mean_temperature mean_temperature_classic min_temperature #> 1  264 [m]         3.9 [°C]                 3.9 [°C]        3.2 [°C] #> 2  427 [m]         2.5 [°C]                 2.6 [°C]        1.9 [°C] #> 3  554 [m]         1.6 [°C]                 1.5 [°C]        0.6 [°C] #> 4  240 [m]         3.4 [°C]                 4.1 [°C]        1.7 [°C] #> 5  626 [m]         2.2 [°C]                 4.3 [°C]       -2.5 [°C] #> 6  849 [m]         2.5 [°C]                 4.4 [°C]       -3.2 [°C] #>   max_temperature thermal_amplitude mean_relative_humidity #> 1        4.5 [°C]          1.3 [°C]                 93 [%] #> 2        3.3 [°C]          1.4 [°C]                 97 [%] #> 3        2.3 [°C]          1.7 [°C]                100 [%] #> 4        6.5 [°C]          4.8 [°C]                 87 [%] #> 5       11.1 [°C]         13.6 [°C]                 85 [%] #> 6       11.9 [°C]         15.1 [°C]                 82 [%] #>   min_relative_humidity max_relative_humidity precipitation precipitation_8h_8h #> 1                87 [%]                97 [%]   0.0 [L/m^2]         0.0 [L/m^2] #> 2                93 [%]               100 [%]   0.0 [L/m^2]         0.3 [L/m^2] #> 3               100 [%]               100 [%]   0.1 [L/m^2]         0.3 [L/m^2] #> 4                72 [%]                97 [%]   0.0 [L/m^2]         0.0 [L/m^2] #> 5                53 [%]                96 [%]   0.0 [L/m^2]         0.0 [L/m^2] #> 6                45 [%]                98 [%]   0.0 [L/m^2]         0.0 [L/m^2] #>   max_precipitation_minute max_precipitation_hour max_precipitation_30m #> 1              0.0 [L/m^2]            0.0 [L/m^2]           0.0 [L/m^2] #> 2              0.0 [L/m^2]            0.0 [L/m^2]           0.0 [L/m^2] #> 3              0.1 [L/m^2]            0.1 [L/m^2]           0.1 [L/m^2] #> 4              0.0 [L/m^2]            0.0 [L/m^2]           0.0 [L/m^2] #> 5              0.0 [L/m^2]            0.0 [L/m^2]           0.0 [L/m^2] #> 6              0.0 [L/m^2]            0.0 [L/m^2]           0.0 [L/m^2] #>   max_precipitation_10m mean_wind_direction max_wind_direction mean_wind_speed #> 1            NA [L/m^2]              NA [°]             NA [°]        NA [m/s] #> 2            NA [L/m^2]              NA [°]             NA [°]        NA [m/s] #> 3            NA [L/m^2]              NA [°]             NA [°]        NA [m/s] #> 4            NA [L/m^2]              NA [°]             NA [°]        NA [m/s] #> 5            NA [L/m^2]              NA [°]             NA [°]        NA [m/s] #> 6            NA [L/m^2]              NA [°]             NA [°]        NA [m/s] #>   max_wind_speed global_solar_radiation mean_atmospheric_pressure #> 1       NA [m/s]           1.6 [MJ/m^2]              1001.7 [hPa] #> 2       NA [m/s]           1.4 [MJ/m^2]               981.6 [hPa] #> 3       NA [m/s]           1.6 [MJ/m^2]               965.9 [hPa] #> 4       NA [m/s]           4.1 [MJ/m^2]              1003.2 [hPa] #> 5       NA [m/s]           8.1 [MJ/m^2]               956.6 [hPa] #> 6       NA [m/s]           8.2 [MJ/m^2]               931.5 [hPa] #>   max_atmospheric_pressure min_atmospheric_pressure mean_snow_cover #> 1             1003.3 [hPa]             1000.7 [hPa]         NA [cm] #> 2              983.1 [hPa]              980.7 [hPa]         NA [cm] #> 3              967.3 [hPa]              965.0 [hPa]         NA [cm] #> 4             1004.9 [hPa]             1002.1 [hPa]         NA [cm] #> 5              957.9 [hPa]              955.5 [hPa]         NA [cm] #> 6              933.1 [hPa]              929.7 [hPa]         NA [cm] #>   max_snow_cover new_snow_cover min_snow_cover reference_evapotranspiration #> 1        NA [cm]        NA [cm]        NA [cm]                 0.22 [L/m^2] #> 2        NA [cm]        NA [cm]        NA [cm]                 0.18 [L/m^2] #> 3        NA [cm]        NA [cm]        NA [cm]                 0.16 [L/m^2] #> 4        NA [cm]        NA [cm]        NA [cm]                 0.48 [L/m^2] #> 5        NA [cm]        NA [cm]        NA [cm]                 0.75 [L/m^2] #> 6        NA [cm]        NA [cm]        NA [cm]                 0.83 [L/m^2] #>                   geometry #> 1  POINT (0.95172 41.6566) #> 2 POINT (1.16234 41.66695) #> 3 POINT (1.29609 41.67555) #> 4 POINT (0.39988 40.71825) #> 5 POINT (2.20862 42.07398) #> 6 POINT (1.43277 42.37083)  # base for loop meteocat_2020q1_for <- data.frame()  for (index in seq_along(start_dates)) {   temp_res <- get_meteo_from(     'meteocat',     meteocat_options(       api_key = keyring::key_get('meteocat'),       resolution = 'daily',       start_date = start_dates[index]     )   )      meteocat_2020q1_for <- rbind(meteocat_2020q1_for, temp_res) }  head(meteocat_2020q1_for) #> Simple feature collection with 6 features and 33 fields #> Geometry type: POINT #> Dimension:     XY #> Bounding box:  xmin: 0.39988 ymin: 40.71825 xmax: 2.20862 ymax: 42.37083 #> Geodetic CRS:  WGS 84 #> # A tibble: 6 × 34 #>   timestamp           service  station_id station_name station_province altitude #>   <dttm>              <chr>    <chr>      <chr>        <chr>                 [m] #> 1 2020-01-01 00:00:00 meteocat C6         Castellnou … Lleida                264 #> 2 2020-01-01 00:00:00 meteocat C7         Tàrrega      Lleida                427 #> 3 2020-01-01 00:00:00 meteocat C8         Cervera      Lleida                554 #> 4 2020-01-01 00:00:00 meteocat C9         Mas de Barb… Tarragona             240 #> 5 2020-01-01 00:00:00 meteocat CC         Orís         Barcelona             626 #> 6 2020-01-01 00:00:00 meteocat CD         la Seu d'Ur… Lleida                849 #> # ℹ 28 more variables: mean_temperature [°C], mean_temperature_classic [°C], #> #   min_temperature [°C], max_temperature [°C], thermal_amplitude [°C], #> #   mean_relative_humidity [%], min_relative_humidity [%], #> #   max_relative_humidity [%], precipitation [L/m^2], #> #   precipitation_8h_8h [L/m^2], max_precipitation_minute [L/m^2], #> #   max_precipitation_hour [L/m^2], max_precipitation_30m [L/m^2], #> #   max_precipitation_10m [L/m^2], mean_wind_direction [°], …  # both are identical identical(meteocat_2020q1_tidyverse, meteocat_2020q1_for) #> [1] FALSE"},{"path":"https://emf-creaf.github.io/meteospain/articles/api_limits.html","id":"monthly","dir":"Articles","previous_headings":"MeteoCat API","what":"monthly","title":"API limits and loops","text":"monthly always returns whole year date selected , .e. start_date = .Date('2020-04-10') return months 2020: means need one year monthly data, need use loops :","code":"api_options <- meteocat_options(   'monthly', start_date = as.Date('2020-04-10'),   api_key = keyring::key_get('meteocat') ) year_2020 <- get_meteo_from('meteocat', api_options) #> ℹ Data provided by meteo.cat © Servei Meteorològic de Catalunya #> https://www.meteo.cat/wpweb/avis-legal/#info unique(year_2020$timestamp) #>  [1] \"2020-01-01 UTC\" \"2020-02-01 UTC\" \"2020-03-01 UTC\" \"2020-04-01 UTC\" #>  [5] \"2020-05-01 UTC\" \"2020-06-01 UTC\" \"2020-07-01 UTC\" \"2020-08-01 UTC\" #>  [9] \"2020-09-01 UTC\" \"2020-10-01 UTC\" \"2020-11-01 UTC\" \"2020-12-01 UTC\" start_dates <- seq(as.Date('2019-01-01'), as.Date('2020-01-01'), 'years') # tidyverse map meteocat_2019_20_tidyverse <-   purrr::map(     .x = start_dates,     .f = function(start_date) {       res <- get_meteo_from(         'meteocat',         meteocat_options(           api_key = keyring::key_get('meteocat'),           resolution = 'monthly',           start_date = start_date         )       )       return(res)     }   ) |>   purrr::list_rbind() #> ℹ Data provided by meteo.cat © Servei Meteorològic de Catalunya #> https://www.meteo.cat/wpweb/avis-legal/#info  head(meteocat_2019_20_tidyverse) #>    timestamp  service station_id                station_name station_province #> 1 2019-01-01 meteocat         C6         Castellnou de Seana           Lleida #> 2 2019-01-01 meteocat         C7                     Tàrrega           Lleida #> 3 2019-01-01 meteocat         C8                     Cervera           Lleida #> 4 2019-01-01 meteocat         C9            Mas de Barberans        Tarragona #> 5 2019-01-01 meteocat         CC                        Orís        Barcelona #> 6 2019-01-01 meteocat         CD la Seu d'Urgell - Bellestar           Lleida #>   altitude mean_temperature mean_temperature_classic min_temperature_absolute #> 1  264 [m]         2.9 [°C]                 3.3 [°C]                -7.0 [°C] #> 2  427 [m]         2.9 [°C]                 3.5 [°C]                -5.0 [°C] #> 3  554 [m]         2.5 [°C]                 2.9 [°C]                -5.6 [°C] #> 4  240 [m]         9.4 [°C]                 9.6 [°C]                 0.2 [°C] #> 5  626 [m]         2.3 [°C]                 3.6 [°C]                -8.3 [°C] #> 6  849 [m]         2.9 [°C]                 3.8 [°C]                -7.1 [°C] #>   min_temperature_mean max_temperature_absolute max_temperature_mean #> 1            -1.8 [°C]                17.9 [°C]             8.5 [°C] #> 2            -0.5 [°C]                15.9 [°C]             7.4 [°C] #> 3            -0.7 [°C]                14.0 [°C]             6.5 [°C] #> 4             5.1 [°C]                18.0 [°C]            14.0 [°C] #> 5            -2.7 [°C]                15.7 [°C]             9.9 [°C] #> 6            -3.0 [°C]                17.9 [°C]            10.7 [°C] #>   max_thermal_amplitude mean_thermal_amplitude extreme_thermal_amplitude #> 1             21.7 [°C]              10.3 [°C]                 24.9 [°C] #> 2             17.9 [°C]               7.8 [°C]                 20.9 [°C] #> 3             16.2 [°C]               7.2 [°C]                 19.6 [°C] #> 4             16.0 [°C]               8.9 [°C]                 17.8 [°C] #> 5             18.5 [°C]              12.6 [°C]                 24.0 [°C] #> 6             20.6 [°C]              13.7 [°C]                 25.0 [°C] #>   mean_relative_humidity min_relative_humidity_absolute #> 1                 84 [%]                         23 [%] #> 2                 85 [%]                         28 [%] #> 3                 85 [%]                         27 [%] #> 4                 55 [%]                         17 [%] #> 5                 73 [%]                          8 [%] #> 6                 56 [%]                          4 [%] #>   min_relative_humidity_mean max_relative_humidity_absolute #> 1                     64 [%]                        100 [%] #> 2                     68 [%]                        100 [%] #> 3                     70 [%]                        100 [%] #> 4                     38 [%]                         97 [%] #> 5                     43 [%]                         96 [%] #> 6                     28 [%]                         98 [%] #>   max_relative_humidity_mean precipitation precipitation_8h_8h #> 1                     97 [%]   8.4 [L/m^2]        15.1 [L/m^2] #> 2                     96 [%]  14.1 [L/m^2]        19.5 [L/m^2] #> 3                     95 [%]  10.4 [L/m^2]        15.1 [L/m^2] #> 4                     76 [%]   4.0 [L/m^2]         5.4 [L/m^2] #> 5                     90 [%]   8.0 [L/m^2]         9.9 [L/m^2] #> 6                     78 [%]  34.9 [L/m^2]        40.5 [L/m^2] #>   max_precipitation_minute max_precipitation_24h max_precipitation_24h_8h_8h #> 1              0.1 [L/m^2]           3.3 [L/m^2]                 7.3 [L/m^2] #> 2              0.1 [L/m^2]           6.1 [L/m^2]                 6.1 [L/m^2] #> 3              0.1 [L/m^2]           5.0 [L/m^2]                 5.1 [L/m^2] #> 4              0.1 [L/m^2]           1.3 [L/m^2]                 1.4 [L/m^2] #> 5              0.2 [L/m^2]           3.6 [L/m^2]                 3.6 [L/m^2] #> 6              0.2 [L/m^2]          16.6 [L/m^2]                15.7 [L/m^2] #>   max_precipitation_hour max_precipitation_30m max_precipitation_10m #> 1            1.0 [L/m^2]           0.8 [L/m^2]            NA [L/m^2] #> 2            1.5 [L/m^2]           0.9 [L/m^2]            NA [L/m^2] #> 3            1.8 [L/m^2]           1.1 [L/m^2]            NA [L/m^2] #> 4            0.6 [L/m^2]           0.6 [L/m^2]            NA [L/m^2] #> 5            2.8 [L/m^2]           1.5 [L/m^2]            NA [L/m^2] #> 6            3.1 [L/m^2]           1.8 [L/m^2]            NA [L/m^2] #>   mean_wind_direction max_wind_direction mean_wind_speed max_wind_speed #> 1              NA [°]             NA [°]        NA [m/s]       NA [m/s] #> 2              NA [°]             NA [°]        NA [m/s]       NA [m/s] #> 3              NA [°]             NA [°]        NA [m/s]       NA [m/s] #> 4              NA [°]             NA [°]        NA [m/s]       NA [m/s] #> 5              NA [°]             NA [°]        NA [m/s]       NA [m/s] #> 6              NA [°]             NA [°]        NA [m/s]       NA [m/s] #>   max_wind_speed_mean max_atmospheric_pressure_absolute #> 1            NA [m/s]                      1002.1 [hPa] #> 2            NA [m/s]                       982.0 [hPa] #> 3            NA [m/s]                       966.2 [hPa] #> 4            NA [m/s]                      1004.0 [hPa] #> 5            NA [m/s]                       957.7 [hPa] #> 6            NA [m/s]                       932.2 [hPa] #>   min_atmospheric_pressure_absolute global_solar_radiation #> 1                       963.8 [hPa]           6.4 [MJ/m^2] #> 2                       945.4 [hPa]           6.4 [MJ/m^2] #> 3                       930.8 [hPa]           6.7 [MJ/m^2] #> 4                       966.9 [hPa]           9.3 [MJ/m^2] #> 5                       922.3 [hPa]           8.0 [MJ/m^2] #> 6                       897.9 [hPa]           8.4 [MJ/m^2] #>   mean_atmospheric_pressure max_atmospheric_pressure_mean #> 1               987.2 [hPa]                   990.1 [hPa] #> 2               967.8 [hPa]                   970.6 [hPa] #> 3               952.3 [hPa]                   955.1 [hPa] #> 4               989.1 [hPa]                   991.9 [hPa] #> 5               942.9 [hPa]                   945.8 [hPa] #> 6               918.4 [hPa]                   921.2 [hPa] #>   min_atmospheric_pressure_mean mean_snow_cover max_snow_cover new_snow_cover #> 1                   984.4 [hPa]         NA [cm]        NA [cm]        NA [cm] #> 2                   965.1 [hPa]         NA [cm]        NA [cm]        NA [cm] #> 3                   949.8 [hPa]         NA [cm]        NA [cm]        NA [cm] #> 4                   986.4 [hPa]         NA [cm]        NA [cm]        NA [cm] #> 5                   940.4 [hPa]         NA [cm]        NA [cm]        NA [cm] #> 6                   915.8 [hPa]         NA [cm]        NA [cm]        NA [cm] #>                   geometry frost_days rain_days_0 rain_days_02 #> 1  POINT (0.95172 41.6566)     22 [d]       5 [d]        5 [d] #> 2 POINT (1.16234 41.66695)     17 [d]      12 [d]        9 [d] #> 3 POINT (1.29609 41.67555)     18 [d]       6 [d]        4 [d] #> 4 POINT (0.39988 40.71825)      0 [d]       5 [d]        3 [d] #> 5 POINT (2.20862 42.07398)     29 [d]       4 [d]        4 [d] #> 6 POINT (1.43277 42.37083)     28 [d]       5 [d]        4 [d]  # base for loop meteocat_2019_20_for <- data.frame()  for (index in seq_along(start_dates)) {   temp_res <- get_meteo_from(     'meteocat',     meteocat_options(       api_key = keyring::key_get('meteocat'),       resolution = 'monthly',       start_date = start_dates[index]     )   )      meteocat_2019_20_for <- rbind(meteocat_2019_20_for, temp_res) } head(meteocat_2019_20_for) #> Simple feature collection with 6 features and 45 fields #> Geometry type: POINT #> Dimension:     XY #> Bounding box:  xmin: 0.39988 ymin: 40.71825 xmax: 2.20862 ymax: 42.37083 #> Geodetic CRS:  WGS 84 #> # A tibble: 6 × 46 #>   timestamp           service  station_id station_name station_province altitude #>   <dttm>              <chr>    <chr>      <chr>        <chr>                 [m] #> 1 2019-01-01 00:00:00 meteocat C6         Castellnou … Lleida                264 #> 2 2019-01-01 00:00:00 meteocat C7         Tàrrega      Lleida                427 #> 3 2019-01-01 00:00:00 meteocat C8         Cervera      Lleida                554 #> 4 2019-01-01 00:00:00 meteocat C9         Mas de Barb… Tarragona             240 #> 5 2019-01-01 00:00:00 meteocat CC         Orís         Barcelona             626 #> 6 2019-01-01 00:00:00 meteocat CD         la Seu d'Ur… Lleida                849 #> # ℹ 40 more variables: mean_temperature [°C], mean_temperature_classic [°C], #> #   min_temperature_absolute [°C], min_temperature_mean [°C], #> #   max_temperature_absolute [°C], max_temperature_mean [°C], #> #   max_thermal_amplitude [°C], mean_thermal_amplitude [°C], #> #   extreme_thermal_amplitude [°C], mean_relative_humidity [%], #> #   min_relative_humidity_absolute [%], min_relative_humidity_mean [%], #> #   max_relative_humidity_absolute [%], max_relative_humidity_mean [%], …  # both are identical identical(meteocat_2019_20_tidyverse, meteocat_2019_20_for) #> [1] FALSE"},{"path":"https://emf-creaf.github.io/meteospain/articles/api_limits.html","id":"yearly","dir":"Articles","previous_headings":"MeteoCat API","what":"yearly","title":"API limits and loops","text":"yearly always returns available years start_date argument ignored, .e. using start_date = .Date('2020-04-10') return years, independently date supplied: means yearly always get data available, need loops.","code":"api_options <- meteocat_options(   'yearly', start_date = as.Date('2020-04-10'),   api_key = keyring::key_get('meteocat') ) all_years <- get_meteo_from('meteocat', api_options) #> ℹ Data provided by meteo.cat © Servei Meteorològic de Catalunya #> https://www.meteo.cat/wpweb/avis-legal/#info unique(all_years$timestamp) #>  [1] \"1989-01-01 UTC\" \"1990-01-01 UTC\" \"1991-01-01 UTC\" \"1992-01-01 UTC\" #>  [5] \"1993-01-01 UTC\" \"1994-01-01 UTC\" \"1995-01-01 UTC\" \"1996-01-01 UTC\" #>  [9] \"1997-01-01 UTC\" \"1998-01-01 UTC\" \"1999-01-01 UTC\" \"2000-01-01 UTC\" #> [13] \"2001-01-01 UTC\" \"2002-01-01 UTC\" \"2003-01-01 UTC\" \"2004-01-01 UTC\" #> [17] \"2005-01-01 UTC\" \"2006-01-01 UTC\" \"2007-01-01 UTC\" \"2008-01-01 UTC\" #> [21] \"2009-01-01 UTC\" \"2010-01-01 UTC\" \"2011-01-01 UTC\" \"2012-01-01 UTC\" #> [25] \"2013-01-01 UTC\" \"2014-01-01 UTC\" \"2015-01-01 UTC\" \"2016-01-01 UTC\" #> [29] \"2017-01-01 UTC\" \"2018-01-01 UTC\" \"2019-01-01 UTC\" \"2020-01-01 UTC\" #> [33] \"2021-01-01 UTC\" \"2022-01-01 UTC\" \"2023-01-01 UTC\" \"2024-01-01 UTC\" #> [37] \"2025-01-01 UTC\""},{"path":"https://emf-creaf.github.io/meteospain/articles/compatibility.html","id":"april-2020-daily-data","dir":"Articles","previous_headings":"","what":"April 2020 daily data","title":"Compatibility between services","text":"gonna download daily data April, 2020 services providing information, combine one object: Don’t forget store keys AEMET MeteoCat done already (see code ) Now daily data April, lets join . gonna use purrr package one pipe. convert data tibble join, way joining spatial data, timestamp stations metadata. join convert back sf. can visualize data, one day.","code":"aemet_daily <- get_meteo_from(     'aemet', aemet_options(       'daily', start_date = as.Date('2020-04-16'), end_date = as.Date('2020-04-30'),       api_key = keyring::key_get('aemet')     ) ) #> ℹ © AEMET. Autorizado el uso de la información y su reproducción citando a #>   AEMET como autora de la misma. #> https://www.aemet.es/es/nota_legal  meteocat_daily <- get_meteo_from(   'meteocat',   meteocat_options('daily', start_date = as.Date('2020-04-16'), api_key = keyring::key_get('meteocat')) ) #> ℹ Data provided by meteo.cat © Servei Meteorològic de Catalunya #> https://www.meteo.cat/wpweb/avis-legal/#info  meteogalicia_daily <- get_meteo_from(   'meteogalicia',   meteogalicia_options('daily', start_date = as.Date('2020-04-16'), end_date = as.Date('2020-04-30')) ) #> ℹ A información divulgada a través deste servidor ofrécese gratuitamente aos #>   cidadáns para que poida ser #> utilizada libremente por eles, co único compromiso de mencionar expresamente a #> MeteoGalicia e á #> Consellería de Medio Ambiente, Territorio e Vivenda da Xunta de Galicia como #> fonte da mesma cada vez #> que as utilice para os usos distintos do particular e privado. #> https://www.meteogalicia.gal/aviso-legal  ria_daily <- get_meteo_from(   'ria',   ria_options('daily', start_date = as.Date('2020-04-16'), end_date = as.Date('2020-04-30')) ) #> Some stations didn't return data for some dates: #> 11-3 #> 11-8 #> 11-9 #> 14-3 #> 18-4 #> 18-9 #> 21-1 #> 21-104 #> 21-106 #> 21-107 #> 21-12 #> 23-10 #> 23-13 #> 23-9 #> 29-3 #> 29-5 #> 4-3 #> 4-9 #> 41-1 #> 41-14 #> 41-4 #> 41-6 #> ℹ Data provided by Red de Información Agroclimática de Andalucía (RIA) #> https://www.juntadeandalucia.es/agriculturaypesca/ifapa/riaweb/web/ april_2020_spain <- list(   dplyr::as_tibble(aemet_daily),   dplyr::as_tibble(meteocat_daily),   dplyr::as_tibble(meteogalicia_daily),   dplyr::as_tibble(ria_daily) ) |>   purrr::reduce(dplyr::full_join) |>   sf::st_as_sf() #> Joining with `by = join_by(timestamp, service, station_id, station_name, #> station_province, altitude, mean_temperature, min_temperature, max_temperature, #> mean_relative_humidity, min_relative_humidity, max_relative_humidity, #> precipitation, mean_wind_speed, max_wind_speed, max_atmospheric_pressure, #> min_atmospheric_pressure, geometry)` #> Joining with `by = join_by(timestamp, service, station_id, station_name, #> station_province, altitude, mean_temperature, min_temperature, max_temperature, #> mean_relative_humidity, min_relative_humidity, max_relative_humidity, #> precipitation, mean_wind_speed, max_wind_speed, insolation, geometry, #> mean_wind_direction, max_wind_direction, mean_atmospheric_pressure, #> reference_evapotranspiration)` #> Joining with `by = join_by(timestamp, service, station_id, station_name, #> station_province, altitude, mean_temperature, min_temperature, max_temperature, #> mean_relative_humidity, min_relative_humidity, max_relative_humidity, #> precipitation, mean_wind_speed, max_wind_speed, geometry, mean_wind_direction, #> max_wind_direction)`  april_2020_spain #> Simple feature collection with 20984 features and 43 fields (with 75 geometries empty) #> Geometry type: POINT #> Dimension:     XY #> Bounding box:  xmin: -18.115 ymin: 27.71889 xmax: 4.323889 ymax: 43.78611 #> Geodetic CRS:  WGS 84 #> # A tibble: 20,984 × 44 #>    timestamp           service station_id station_name station_province altitude #>    <dttm>              <chr>   <chr>      <chr>        <chr>                 [m] #>  1 2020-04-16 00:00:00 aemet   0009X      ALFORJA      TARRAGONA             406 #>  2 2020-04-16 00:00:00 aemet   0016A      REUS AEROPU… TARRAGONA              71 #>  3 2020-04-16 00:00:00 aemet   0016B      REUS (CENTR… TARRAGONA             118 #>  4 2020-04-16 00:00:00 aemet   0034X      VALLS        TARRAGONA             233 #>  5 2020-04-16 00:00:00 aemet   0061X      PONTONS      BARCELONA             632 #>  6 2020-04-16 00:00:00 aemet   0073X      SITGES       BARCELONA              58 #>  7 2020-04-16 00:00:00 aemet   0076       BARCELONA A… BARCELONA               4 #>  8 2020-04-16 00:00:00 aemet   0092X      BERGA        BARCELONA             682 #>  9 2020-04-16 00:00:00 aemet   0106X      BALSARENY    BARCELONA             361 #> 10 2020-04-16 00:00:00 aemet   0114X      PRATS DE LL… BARCELONA             700 #> # ℹ 20,974 more rows #> # ℹ 38 more variables: mean_temperature [°C], min_temperature [°C], #> #   max_temperature [°C], mean_relative_humidity [%], #> #   min_relative_humidity [%], max_relative_humidity [%], #> #   precipitation [L/m^2], wind_direction [°], mean_wind_speed [m/s], #> #   max_wind_speed [m/s], insolation [h], max_atmospheric_pressure [hPa], #> #   min_atmospheric_pressure [hPa], geometry <POINT [°]>, …"},{"path":"https://emf-creaf.github.io/meteospain/articles/compatibility.html","id":"by-service","dir":"Articles","previous_headings":"April 2020 daily data","what":"By service","title":"Compatibility between services","text":"","code":"april_2020_spain |>   dplyr::filter(lubridate::day(timestamp) == 25) |>   units::drop_units() |>   ggplot(aes(colour = service)) +   geom_sf() +   scale_colour_viridis_d()"},{"path":"https://emf-creaf.github.io/meteospain/articles/compatibility.html","id":"by-one-variable","dir":"Articles","previous_headings":"April 2020 daily data","what":"By one variable","title":"Compatibility between services","text":"","code":"april_2020_spain |>   dplyr::filter(lubridate::day(timestamp) == 25) |>   units::drop_units() |>   ggplot(aes(colour = mean_temperature)) +   geom_sf() +   scale_colour_viridis_c()"},{"path":"https://emf-creaf.github.io/meteospain/articles/meteocat.html","id":"meteocat-service","dir":"Articles","previous_headings":"","what":"MeteoCat service","title":"MeteoCat service","text":"MeteoCat Catalonian meteorologic service. offers access different meteorological data information, one main missions curate circulate data meteorological stations. meteospain access automatic meteorological stations network data.","code":""},{"path":[]},{"path":"https://emf-creaf.github.io/meteospain/articles/meteocat.html","id":"temporal-resolution","dir":"Articles","previous_headings":"MeteoCat service > MeteoCat options","what":"Temporal resolution","title":"MeteoCat service","text":"meteospain offers access MeteoCat API different temporal resolutions: “instant”, returning latest 4 hours measures selected stations. “hourly”, returning measures (stations timesteps 30 min, others 60 min, others ) selected stations. “daily”, returning daily aggregates month date provided, .e. ‘2020-04-10’ provided start_date, daily values April 2020 returned. “monthly”, returning monthly aggregates year date provided, .e. ‘2020-04-10’ provided start_date, monthly values 2020 returned. “yearly”, returning yearly aggregates years available. case date provided ignored. “daily” “monthly”, start_date argument must provided, indicating date retrieve data explained earlier. info see vignette('api_limits', package = 'meteospain').","code":""},{"path":"https://emf-creaf.github.io/meteospain/articles/meteocat.html","id":"stations","dir":"Articles","previous_headings":"MeteoCat service > MeteoCat options","what":"Stations","title":"MeteoCat service","text":"meteospain access data MeteoCat API collecting stations. character vector stations codes supplied stations argument, filter step done returning data maintain stations supplied.","code":""},{"path":"https://emf-creaf.github.io/meteospain/articles/meteocat.html","id":"meteocat-api-key","dir":"Articles","previous_headings":"MeteoCat service > MeteoCat options","what":"MeteoCat API Key","title":"MeteoCat service","text":"MeteoCat API allow access data personal API Key. token must included api_key argument meteocat_options function. obtain API Key, please visit https://apidocs.meteocat.gencat.cat/ follow instructions . advisable use keys directly script shared publicly available (github…), neither store plain text files. One option using keyring package managing accessing keys:","code":"install.packages('keyring') library(keyring) key_set('meteocat') # A prompt asking for the secret (the API Key) will appear."},{"path":"https://emf-creaf.github.io/meteospain/articles/meteocat.html","id":"examples","dir":"Articles","previous_headings":"MeteoCat service > MeteoCat options","what":"Examples","title":"MeteoCat service","text":"","code":"# current day, all stations api_options <- meteocat_options(   resolution = 'instant',   api_key = key_get('meteocat') ) api_options #> $resolution #> [1] \"instant\" #>  #> $start_date #> [1] \"2025-10-01\" #>  #> $stations #> NULL #>  #> $api_key #> [1] \"my_api_key\" # daily, all stations api_options <- meteocat_options(   resolution = 'daily',   start_date = as.Date('2020-04-10'),   api_key = key_get('meteocat') ) api_options #> $resolution #> [1] \"daily\" #>  #> $start_date #> [1] \"2020-04-25\" #>  #> $stations #> NULL #>  #> $api_key #> [1] \"my_api_key\""},{"path":"https://emf-creaf.github.io/meteospain/articles/meteocat.html","id":"meteocat-stations-info","dir":"Articles","previous_headings":"MeteoCat service","what":"MeteoCat stations info","title":"MeteoCat service","text":"Accessing station metadata MeteoCat simple:","code":"get_stations_info_from('meteocat', api_options) #> Simple feature collection with 244 features and 5 fields #> Geometry type: POINT #> Dimension:     XY #> Bounding box:  xmin: 0.30565 ymin: 40.55219 xmax: 3.18147 ymax: 42.77011 #> Geodetic CRS:  WGS 84 #> # A tibble: 244 × 6 #>    service  station_id station_name                   station_province altitude #>  * <chr>    <chr>      <chr>                          <chr>                 [m] #>  1 meteocat AN         Barcelona - Av. Lluís Companys Barcelona             7.5 #>  2 meteocat C6         Castellnou de Seana            Lleida              264   #>  3 meteocat C7         Tàrrega                        Lleida              427   #>  4 meteocat C8         Cervera                        Lleida              554   #>  5 meteocat C9         Mas de Barberans               Tarragona           240   #>  6 meteocat CA         Clariana de Cardener           Lleida              693   #>  7 meteocat CB         les Llosses                    Girona              700   #>  8 meteocat CC         Orís                           Barcelona           626   #>  9 meteocat CD         la Seu d'Urgell - Bellestar    Lleida              849   #> 10 meteocat CE         els Hostalets de Pierola       Barcelona           316   #> # ℹ 234 more rows #> # ℹ 1 more variable: geometry <POINT [°]>"},{"path":"https://emf-creaf.github.io/meteospain/articles/meteocat.html","id":"meteocat-data","dir":"Articles","previous_headings":"MeteoCat service","what":"MeteoCat data","title":"MeteoCat service","text":"Visually:","code":"api_options <- meteocat_options(   resolution = 'monthly',   start_date = as.Date('2020-04-01'),   api_key = key_get('meteocat') ) catalunya_2020 <- get_meteo_from('meteocat', options = api_options) #> ℹ Data provided by meteo.cat © Servei Meteorològic de Catalunya #> https://www.meteo.cat/wpweb/avis-legal/#info catalunya_2020 #> Simple feature collection with 2255 features and 45 fields #> Geometry type: POINT #> Dimension:     XY #> Bounding box:  xmin: 0.30565 ymin: 40.55786 xmax: 3.18147 ymax: 42.77011 #> Geodetic CRS:  WGS 84 #> # A tibble: 2,255 × 46 #>    timestamp           service station_id station_name station_province altitude #>  * <dttm>              <chr>   <chr>      <chr>        <chr>                 [m] #>  1 2020-01-01 00:00:00 meteoc… C6         Castellnou … Lleida               264  #>  2 2020-01-01 00:00:00 meteoc… C7         Tàrrega      Lleida               427  #>  3 2020-01-01 00:00:00 meteoc… C8         Cervera      Lleida               554  #>  4 2020-01-01 00:00:00 meteoc… C9         Mas de Barb… Tarragona            240  #>  5 2020-01-01 00:00:00 meteoc… CC         Orís         Barcelona            626  #>  6 2020-01-01 00:00:00 meteoc… CD         la Seu d'Ur… Lleida               849  #>  7 2020-01-01 00:00:00 meteoc… CE         els Hostale… Barcelona            316  #>  8 2020-01-01 00:00:00 meteoc… CG         Molló - Fab… Girona              1405  #>  9 2020-01-01 00:00:00 meteoc… CI         Sant Pau de… Girona               852  #> 10 2020-01-01 00:00:00 meteoc… CJ         Organyà      Lleida               566. #> # ℹ 2,245 more rows #> # ℹ 40 more variables: mean_temperature [°C], mean_temperature_classic [°C], #> #   min_temperature_absolute [°C], min_temperature_mean [°C], #> #   max_temperature_absolute [°C], max_temperature_mean [°C], #> #   max_thermal_amplitude [°C], mean_thermal_amplitude [°C], #> #   extreme_thermal_amplitude [°C], mean_relative_humidity [%], #> #   min_relative_humidity_absolute [%], min_relative_humidity_mean [%], … catalunya_2020 |>   units::drop_units() |>   mutate(month = lubridate::month(timestamp, label = TRUE)) |>   ggplot() +   geom_sf(aes(colour = mean_temperature)) +   facet_wrap(vars(month), ncol = 4) +   scale_colour_viridis_c() catalunya_2020 |>   mutate(month = lubridate::month(timestamp, label = TRUE)) |>   ggplot() +   geom_histogram(aes(x = precipitation)) +   facet_wrap(vars(month), ncol = 4) #> `stat_bin()` using `bins = 30`. Pick better value `binwidth`. #> Warning: Removed 25 rows containing non-finite outside the scale range #> (`stat_bin()`)."},{"path":"https://emf-creaf.github.io/meteospain/articles/meteoclimatic.html","id":"meteoclimatic-service","dir":"Articles","previous_headings":"","what":"Meteoclimatic service","title":"Meteoclimatic service","text":"Meteoclimatic non-professional (amateur) network automatic meteorological stations. network cover Spain, offer quality testing data.","code":""},{"path":[]},{"path":"https://emf-creaf.github.io/meteospain/articles/meteoclimatic.html","id":"temporal-resolution","dir":"Articles","previous_headings":"Meteoclimatic service > Meteoclimatic options","what":"Temporal resolution","title":"Meteoclimatic service","text":"Meteoclimatic API offers aggregated data current day, , case resolution parameter limited “current_day”.","code":""},{"path":"https://emf-creaf.github.io/meteospain/articles/meteoclimatic.html","id":"stations","dir":"Articles","previous_headings":"Meteoclimatic service > Meteoclimatic options","what":"Stations","title":"Meteoclimatic service","text":"Meteoclimatic API accept multiple stations query. station codes can access data several stations geographic area (.e. “ES” stations, “ESCAT” stations Catalunya, “ESCAT08” stations Barcelona province). , stations limited length one.","code":""},{"path":"https://emf-creaf.github.io/meteospain/articles/meteoclimatic.html","id":"example","dir":"Articles","previous_headings":"Meteoclimatic service > Meteoclimatic options","what":"Example","title":"Meteoclimatic service","text":"","code":"api_options <- meteoclimatic_options(stations = 'ESCAT08') api_options #> $resolution #> [1] \"current_day\" #>  #> $stations #> [1] \"ESCAT08\""},{"path":"https://emf-creaf.github.io/meteospain/articles/meteoclimatic.html","id":"meteoclimatic-stations-info","dir":"Articles","previous_headings":"Meteoclimatic service","what":"Meteoclimatic stations info","title":"Meteoclimatic service","text":"Accessing station metadata Meteoclimatic simple:","code":"get_stations_info_from('meteoclimatic', options = api_options) #> Simple feature collection with 238 features and 3 fields #> Geometry type: POINT #> Dimension:     XY #> Bounding box:  xmin: 1.52 ymin: 1.81 xmax: 41.41 ymax: 42.3 #> Geodetic CRS:  WGS 84 #> # A tibble: 238 × 4 #>    service       station_id          station_name          geometry #>  * <chr>         <chr>               <chr>              <POINT [°]> #>  1 meteoclimatic ESCAT0800000008591B Aiguafreda Aj. (… (2.25 41.77) #>  2 meteoclimatic ESCAT0800000008328F Alella-Mirador (… (2.29 41.49) #>  3 meteoclimatic ESCAT0800000008350A Arenys de Mar (B… (2.56 41.59) #>  4 meteoclimatic ESCAT0800000008358A Arenys de Munt (… (2.54 41.61) #>  5 meteoclimatic ESCAT0800000008310B Argentona (Barce… (2.39 41.56) #>  6 meteoclimatic ESCAT0800000008610B Avià (Barcelona)  (1.83 42.08) #>  7 meteoclimatic ESCAT0800000008610A Avià - Sud (Barc… (1.83 42.07) #>  8 meteoclimatic ESCAT0800000008915C Badalona - BCIN … (2.26 41.46) #>  9 meteoclimatic ESCAT0800000008915A Badalona - Bufal… (2.24 41.46) #> 10 meteoclimatic ESCAT0800000008912A Badalona - Centr… (2.25 41.45) #> # ℹ 228 more rows"},{"path":"https://emf-creaf.github.io/meteospain/articles/meteoclimatic.html","id":"meteoclimatic-data","dir":"Articles","previous_headings":"Meteoclimatic service","what":"Meteoclimatic data","title":"Meteoclimatic service","text":"Visually:","code":"current_day_barcelona <- get_meteo_from('meteoclimatic', options = api_options) #> ℹ Meteoclimatic is a non-professional network of automatic meteorological #>   stations. #> No quality check is performed in this data, and errors in measures or #> coordinates of stations can be present. #> https://www.meteoclimatic.net/index current_day_barcelona #> Simple feature collection with 238 features and 13 fields #> Geometry type: POINT #> Dimension:     XY #> Bounding box:  xmin: 1.52 ymin: 1.81 xmax: 41.41 ymax: 42.3 #> Geodetic CRS:  WGS 84 #> # A tibble: 238 × 14 #>    timestamp           service       station_id     station_name min_temperature #>  * <dttm>              <chr>         <chr>          <chr>                   [°C] #>  1 2025-10-01 14:00:00 meteoclimatic ESCAT08000000… Vacarisses …            11.9 #>  2 2025-10-01 14:00:00 meteoclimatic ESCAT08000000… Puigllançad…             6.9 #>  3 2025-10-01 14:00:00 meteoclimatic ESCAT08000000… Cadí Est- P…             4.8 #>  4 2025-10-01 14:00:00 meteoclimatic ESCAT08000000… Bagà (refug…             8.8 #>  5 2025-10-01 14:00:00 meteoclimatic ESCAT08000000… La Pobla de…            12.1 #>  6 2025-10-01 14:00:00 meteoclimatic ESCAT08000000… Pedraforca-…             5.6 #>  7 2025-10-01 14:03:00 meteoclimatic ESCAT08000000… Sant Marti …            12.4 #>  8 2025-10-01 14:05:00 meteoclimatic ESCAT08000000… Cussons - S…            13.1 #>  9 2025-10-01 14:06:00 meteoclimatic ESCAT08000000… Barcelona -…            18.7 #> 10 2025-10-01 14:06:00 meteoclimatic ESCAT08000000… Molins de R…            15.1 #> # ℹ 228 more rows #> # ℹ 9 more variables: max_temperature [°C], min_relative_humidity [%], #> #   max_relative_humidity [%], precipitation [L/m^2], wind_direction [°], #> #   max_wind_speed [km/h], max_atmospheric_pressure [hPa], #> #   min_atmospheric_pressure [hPa], geometry <POINT [°]> current_day_barcelona |>   units::drop_units() |>   ggplot() +   geom_sf(aes(colour = max_temperature)) +   scale_colour_viridis_c() current_day_barcelona |>   ggplot() +   geom_histogram(aes(x = max_relative_humidity)) #> `stat_bin()` using `bins = 30`. Pick better value `binwidth`. #> Warning: Removed 6 rows containing non-finite outside the scale range #> (`stat_bin()`)."},{"path":"https://emf-creaf.github.io/meteospain/articles/meteogalicia.html","id":"meteogalicia-service","dir":"Articles","previous_headings":"","what":"MeteoGalicia service","title":"MeteoGalicia service","text":"MeteoGalicia service offers data galician automatic meteorological stations network. network supported assessed Xunta de Galicia data trustworthy.","code":""},{"path":[]},{"path":"https://emf-creaf.github.io/meteospain/articles/meteogalicia.html","id":"temporal-resolution","dir":"Articles","previous_headings":"MeteoGalicia service > MeteoGalicia options","what":"Temporal resolution","title":"MeteoGalicia service","text":"MeteoGalicia API offers data different temporal resolutions: “instant”, returning latest measures selected stations. “current_day”, returning latest 24 hours measures selected stations. “daily”, returning daily aggregated measures selected stations. “monthly”, returning monthly aggregated measures selected stations. , “daily” “monthly”, start_date (optionally end_date) arguments must provided, indicating period retrieve data.","code":""},{"path":"https://emf-creaf.github.io/meteospain/articles/meteogalicia.html","id":"stations","dir":"Articles","previous_headings":"MeteoGalicia service > MeteoGalicia options","what":"Stations","title":"MeteoGalicia service","text":"MeteoGalicia API allows specifying stations code narrow data retrieved. , character vector station codes can supplied stations argument.","code":""},{"path":"https://emf-creaf.github.io/meteospain/articles/meteogalicia.html","id":"examples","dir":"Articles","previous_headings":"MeteoGalicia service > MeteoGalicia options","what":"Examples","title":"MeteoGalicia service","text":"","code":"# last measure for all stations api_options <- meteogalicia_options() api_options #> $resolution #> [1] \"instant\" #>  #> $start_date #> [1] \"2025-10-01\" #>  #> $end_date #> [1] \"2025-10-01\" #>  #> $stations #> NULL  # current day, only some stations api_options <- meteogalicia_options(   resolution = 'current_day',   stations = c('10157', '14000', '10045') ) api_options #> $resolution #> [1] \"current_day\" #>  #> $start_date #> [1] \"2025-10-01\" #>  #> $end_date #> [1] \"2025-10-01\" #>  #> $stations #> [1] \"10157\" \"14000\" \"10045\"  # daily, all stations api_options <- meteogalicia_options(   resolution = 'daily',   start_date = as.Date('2020-04-25'), end_date = as.Date('2020-05-25') ) api_options #> $resolution #> [1] \"daily\" #>  #> $start_date #> [1] \"2020-04-25\" #>  #> $end_date #> [1] \"2020-05-25\" #>  #> $stations #> NULL  # monthly, some stations api_options <- meteogalicia_options(   resolution = 'monthly',   start_date = as.Date('2020-04-01'), end_date = as.Date('2020-08-01'),   stations = c('10157', '14000', '10045') ) api_options #> $resolution #> [1] \"monthly\" #>  #> $start_date #> [1] \"2020-04-01\" #>  #> $end_date #> [1] \"2020-08-01\" #>  #> $stations #> [1] \"10157\" \"14000\" \"10045\""},{"path":"https://emf-creaf.github.io/meteospain/articles/meteogalicia.html","id":"meteogalicia-stations-info","dir":"Articles","previous_headings":"MeteoGalicia service","what":"MeteoGalicia stations info","title":"MeteoGalicia service","text":"Accessing station metadata MeteoGalicia simple:","code":"get_stations_info_from('meteogalicia') #> Simple feature collection with 154 features and 5 fields #> Geometry type: POINT #> Dimension:     XY #> Bounding box:  xmin: -9.184586 ymin: 41.8982 xmax: -6.765224 ymax: 43.7383 #> Geodetic CRS:  WGS 84 #> # A tibble: 154 × 6 #>    service      station_id station_name             station_province altitude #>  * <chr>        <chr>      <chr>                    <chr>                 [m] #>  1 meteogalicia 10157      Coruña-Torre de Hércules A Coruña               21 #>  2 meteogalicia 14000      Coruña-Dique             A Coruña                5 #>  3 meteogalicia 10045      Mabegondo                A Coruña               94 #>  4 meteogalicia 14003      Punta Langosteira        A Coruña                5 #>  5 meteogalicia 10144      Arzúa                    A Coruña              362 #>  6 meteogalicia 19005      Guísamo                  A Coruña              175 #>  7 meteogalicia 10095      Sergude                  A Coruña              231 #>  8 meteogalicia 10800      Camariñas                A Coruña                5 #>  9 meteogalicia 19001      Rus                      A Coruña              134 #> 10 meteogalicia 10147      Cariño                   A Coruña               20 #> # ℹ 144 more rows #> # ℹ 1 more variable: geometry <POINT [°]>"},{"path":"https://emf-creaf.github.io/meteospain/articles/meteogalicia.html","id":"meteogalicia-data","dir":"Articles","previous_headings":"MeteoGalicia service","what":"MeteoGalicia data","title":"MeteoGalicia service","text":"Visually:","code":"api_options <- meteogalicia_options(   resolution = 'monthly',   start_date = as.Date('2020-01-01'),   end_date = as.Date('2020-12-31') ) galicia_2020 <- get_meteo_from('meteogalicia', options = api_options) #> ℹ A información divulgada a través deste servidor ofrécese gratuitamente aos #>   cidadáns para que poida ser #> utilizada libremente por eles, co único compromiso de mencionar expresamente a #> MeteoGalicia e á #> Consellería de Medio Ambiente, Territorio e Vivenda da Xunta de Galicia como #> fonte da mesma cada vez #> que as utilice para os usos distintos do particular e privado. #> https://www.meteogalicia.gal/aviso-legal galicia_2020 #> Simple feature collection with 1770 features and 31 fields (with 12 geometries empty) #> Geometry type: POINT #> Dimension:     XY #> Bounding box:  xmin: -9.178318 ymin: 41.8982 xmax: -6.765224 ymax: 43.70426 #> Geodetic CRS:  WGS 84 #> # A tibble: 1,770 × 32 #>    timestamp           service station_id station_name station_province altitude #>    <dttm>              <chr>   <chr>      <chr>        <chr>                 [m] #>  1 2020-01-01 00:00:00 meteog… 10045      Mabegondo    A Coruña               94 #>  2 2020-01-01 00:00:00 meteog… 10046      Marco da Cu… A Coruña              651 #>  3 2020-01-01 00:00:00 meteog… 10047      Pedro Murias Lugo                   51 #>  4 2020-01-01 00:00:00 meteog… 10048      O Invernade… Ourense              1026 #>  5 2020-01-01 00:00:00 meteog… 10049      Corrubedo    A Coruña               30 #>  6 2020-01-01 00:00:00 meteog… 10050      CIS Ferrol   A Coruña               37 #>  7 2020-01-01 00:00:00 meteog… 10052      Muralla      A Coruña              661 #>  8 2020-01-01 00:00:00 meteog… 10053      Campus Lugo  Lugo                  400 #>  9 2020-01-01 00:00:00 meteog… 10055      Guitiriz-Mi… Lugo                  684 #> 10 2020-01-01 00:00:00 meteog… 10056      Marroxo      Lugo                  645 #> # ℹ 1,760 more rows #> # ℹ 26 more variables: mean_temperature [°C], min_temperature [°C], #> #   min_temperature_mean [°C], max_temperature [°C], max_temperature_mean [°C], #> #   mean_relative_humidity [%], min_relative_humidity_mean [%], #> #   max_relative_humidity_mean [%], precipitation [L/m^2], #> #   max_precipitation_24h [L/m^2], mean_wind_direction [°], #> #   max_wind_direction [°], mean_wind_speed [m/s], max_wind_speed [m/s], … galicia_2020 |>   units::drop_units() |>   mutate(month = lubridate::month(timestamp, label = TRUE)) |>   ggplot() +   geom_sf(aes(colour = max_temperature)) +   facet_wrap(vars(month), ncol = 4) +   scale_colour_viridis_c() galicia_2020 |>   mutate(month = lubridate::month(timestamp, label = TRUE)) |>   ggplot() +   geom_histogram(aes(x = precipitation)) +   facet_wrap(vars(month), ncol = 4) #> `stat_bin()` using `bins = 30`. Pick better value `binwidth`. #> Warning: Removed 1 row containing non-finite outside the scale range #> (`stat_bin()`)."},{"path":"https://emf-creaf.github.io/meteospain/articles/ria.html","id":"red-de-información-agroclimática-de-andalucía-ria-service","dir":"Articles","previous_headings":"","what":"Red de Información Agroclimática de Andalucía (RIA) service","title":"RIA service","text":"RIA service offers data andalucian automatic meteorological stations network. network supported assessed Junta de Andalucía data trustworthy.","code":""},{"path":[]},{"path":"https://emf-creaf.github.io/meteospain/articles/ria.html","id":"temporal-resolution","dir":"Articles","previous_headings":"Red de Información Agroclimática de Andalucía (RIA) service > RIA options","what":"Temporal resolution","title":"RIA service","text":"RIA API offers data different temporal resolutions: “daily”, returning daily aggregated measures selected stations. “monthly”, returning monthly aggregated measures selected stations. , “daily” “monthly”, start_date (optionally end_date) arguments must provided, indicating period retrieve data.","code":""},{"path":"https://emf-creaf.github.io/meteospain/articles/ria.html","id":"stations","dir":"Articles","previous_headings":"Red de Información Agroclimática de Andalucía (RIA) service > RIA options","what":"Stations","title":"RIA service","text":"RIA API needs station codes province codes retrieve data. Sadly, RIA doesn’t provide unique station codes, uniqueness comes province id station code together. , narrow data retrieving desired stations must provided character vector “province_id-station_code” values (.e. “14-2”) stations argument. Calling get_stations_info_from('ria', ria_options) show station correct codes station_id column take reference.","code":""},{"path":"https://emf-creaf.github.io/meteospain/articles/ria.html","id":"examples","dir":"Articles","previous_headings":"Red de Información Agroclimática de Andalucía (RIA) service > RIA options","what":"Examples","title":"RIA service","text":"","code":"# default, daily for yesterday api_options <- ria_options() api_options #> $resolution #> [1] \"daily\" #>  #> $start_date #> [1] \"2025-09-30\" #>  #> $end_date #> [1] \"2025-09-30\" #>  #> $stations #> NULL  # daily, only some stations api_options <- ria_options(   resolution = 'daily',   stations = c('14-2', '4-2') ) api_options #> $resolution #> [1] \"daily\" #>  #> $start_date #> [1] \"2025-09-30\" #>  #> $end_date #> [1] \"2025-09-30\" #>  #> $stations #> [1] \"14-2\" \"4-2\"  # monthly, some stations api_options <- ria_options(   resolution = 'monthly',   start_date = as.Date('2020-04-01'), end_date = as.Date('2020-08-01'),   stations = c('14-2', '4-2') ) api_options #> $resolution #> [1] \"monthly\" #>  #> $start_date #> [1] \"2020-04-01\" #>  #> $end_date #> [1] \"2020-08-01\" #>  #> $stations #> [1] \"14-2\" \"4-2\""},{"path":"https://emf-creaf.github.io/meteospain/articles/ria.html","id":"ria-stations-info","dir":"Articles","previous_headings":"Red de Información Agroclimática de Andalucía (RIA) service","what":"RIA stations info","title":"RIA service","text":"Accessing station metadata RIA simple:","code":"get_stations_info_from('ria', api_options) #> Simple feature collection with 123 features and 7 fields #> Geometry type: POINT #> Dimension:     XY #> Bounding box:  xmin: -7.248333 ymin: 36.285 xmax: -1.770278 ymax: 38.49611 #> Geodetic CRS:  WGS 84 #> # A tibble: 123 × 8 #>    service station_id station_name         station_province province_id altitude #>  * <chr>   <chr>      <chr>                <chr>                  <int>      [m] #>  1 ria     14-2       Adamuz               Córdoba                   14      145 #>  2 ria     4-10       Adra                 Almería                    4        2 #>  3 ria     23-6       Alcaudete            Jaén                      23      640 #>  4 ria     4-2        Almería              Almería                    4        5 #>  5 ria     21-10      Almonte              Huelva                    21       13 #>  6 ria     21-103     Almonte bajo plásti… Huelva                    21       38 #>  7 ria     21-104     Almonte bajo plásti… Huelva                    21       23 #>  8 ria     18-11      Almuñecar            Granada                   18       29 #>  9 ria     18-9       Almuñecar            Granada                   18       49 #> 10 ria     29-3       Antequera            Málaga                    29      457 #> # ℹ 113 more rows #> # ℹ 2 more variables: under_plastic <lgl>, geometry <POINT [°]>"},{"path":"https://emf-creaf.github.io/meteospain/articles/ria.html","id":"ria-data","dir":"Articles","previous_headings":"Red de Información Agroclimática de Andalucía (RIA) service","what":"RIA data","title":"RIA service","text":"Visually:","code":"api_options <- ria_options(   resolution = 'monthly',   start_date = as.Date('2020-01-01'),   end_date = as.Date('2020-12-31') ) andalucia_2020 <- get_meteo_from('ria', options = api_options) #> Some stations didn't return data for some dates: #> 11-3 #> 11-8 #> 11-9 #> 14-3 #> 18-4 #> 18-9 #> 21-1 #> 21-104 #> 21-106 #> 21-107 #> 21-12 #> 23-10 #> 23-13 #> 23-9 #> 29-3 #> 29-5 #> 4-3 #> 4-9 #> 41-1 #> 41-14 #> 41-4 #> 41-6 #> ℹ Data provided by Red de Información Agroclimática de Andalucía (RIA) #> https://www.juntadeandalucia.es/agriculturaypesca/ifapa/riaweb/web/ andalucia_2020 #> Simple feature collection with 1209 features and 19 fields #> Geometry type: POINT #> Dimension:     XY #> Bounding box:  xmin: -7.248333 ymin: 36.285 xmax: -1.770278 ymax: 38.49611 #> Geodetic CRS:  WGS 84 #> First 10 features: #>     timestamp service station_id station_name station_province altitude #> 1  2020-01-01     ria       14-2       Adamuz          Córdoba  145 [m] #> 2  2020-02-01     ria       14-2       Adamuz          Córdoba  145 [m] #> 3  2020-03-01     ria       14-2       Adamuz          Córdoba  145 [m] #> 4  2020-04-01     ria       14-2       Adamuz          Córdoba  145 [m] #> 5  2020-05-01     ria       14-2       Adamuz          Córdoba  145 [m] #> 6  2020-06-01     ria       14-2       Adamuz          Córdoba  145 [m] #> 7  2020-07-01     ria       14-2       Adamuz          Córdoba  145 [m] #> 8  2020-08-01     ria       14-2       Adamuz          Córdoba  145 [m] #> 9  2020-09-01     ria       14-2       Adamuz          Córdoba  145 [m] #> 10 2020-10-01     ria       14-2       Adamuz          Córdoba  145 [m] #>    mean_temperature min_temperature max_temperature mean_relative_humidity #> 1        8.084 [°C]     -1.075 [°C]      18.59 [°C]             86.550 [%] #> 2       12.118 [°C]      1.414 [°C]      25.33 [°C]             82.603 [%] #> 3       13.362 [°C]      2.343 [°C]      29.61 [°C]             76.503 [%] #> 4       15.378 [°C]      4.422 [°C]      26.26 [°C]             83.117 [%] #> 5       21.035 [°C]      9.440 [°C]      36.67 [°C]             65.812 [%] #> 6       24.067 [°C]     11.320 [°C]      40.67 [°C]             47.662 [%] #> 7       29.895 [°C]     14.330 [°C]      43.21 [°C]             37.810 [%] #> 8       27.107 [°C]     11.310 [°C]      43.69 [°C]             41.089 [%] #> 9       22.876 [°C]      8.720 [°C]      37.68 [°C]             56.056 [%] #> 10      15.796 [°C]      4.093 [°C]      33.13 [°C]             69.394 [%] #>    min_relative_humidity max_relative_humidity precipitation #> 1             32.860 [%]             100.0 [%]  44.2 [L/m^2] #> 2             16.250 [%]             100.0 [%]   3.2 [L/m^2] #> 3             23.710 [%]             100.0 [%]  57.8 [L/m^2] #> 4             32.710 [%]             100.0 [%]  73.8 [L/m^2] #> 5             16.570 [%]             100.0 [%]  23.6 [L/m^2] #> 6             11.600 [%]             100.0 [%]   1.4 [L/m^2] #> 7              8.110 [%]              81.1 [%]   1.2 [L/m^2] #> 8              3.755 [%]             100.0 [%]  10.6 [L/m^2] #> 9             14.220 [%]             100.0 [%]  27.0 [L/m^2] #> 10            16.180 [%]             100.0 [%]  35.8 [L/m^2] #>    mean_wind_direction max_wind_direction mean_wind_speed max_wind_speed #> 1           56.916 [°]             NA [°]     0.451 [m/s]    7.010 [m/s] #> 2          113.220 [°]             NA [°]     0.414 [m/s]    5.664 [m/s] #> 3          219.480 [°]             NA [°]     0.721 [m/s]    8.820 [m/s] #> 4          211.290 [°]             NA [°]     0.504 [m/s]    7.140 [m/s] #> 5          171.527 [°]             NA [°]     0.505 [m/s]    6.213 [m/s] #> 6          226.806 [°]             NA [°]     0.852 [m/s]    7.950 [m/s] #> 7          223.775 [°]             NA [°]     0.510 [m/s]    5.684 [m/s] #> 8          228.480 [°]             NA [°]     0.452 [m/s]    5.410 [m/s] #> 9          210.046 [°]             NA [°]     0.282 [m/s]    7.160 [m/s] #> 10         170.166 [°]             NA [°]     0.328 [m/s]    8.770 [m/s] #>      solar_radiation under_plastic                  geometry #> 1   8.108 [MJ/d/m^2]         FALSE POINT (-4.445278 37.9975) #> 2  13.562 [MJ/d/m^2]         FALSE POINT (-4.445278 37.9975) #> 3  15.845 [MJ/d/m^2]         FALSE POINT (-4.445278 37.9975) #> 4  17.620 [MJ/d/m^2]         FALSE POINT (-4.445278 37.9975) #> 5  23.983 [MJ/d/m^2]         FALSE POINT (-4.445278 37.9975) #> 6  28.220 [MJ/d/m^2]         FALSE POINT (-4.445278 37.9975) #> 7  27.251 [MJ/d/m^2]         FALSE POINT (-4.445278 37.9975) #> 8  24.888 [MJ/d/m^2]         FALSE POINT (-4.445278 37.9975) #> 9  18.787 [MJ/d/m^2]         FALSE POINT (-4.445278 37.9975) #> 10 14.771 [MJ/d/m^2]         FALSE POINT (-4.445278 37.9975) andalucia_2020 |>   units::drop_units() |>   mutate(month = lubridate::month(timestamp, label = TRUE)) |>   ggplot() +   geom_sf(aes(colour = max_temperature)) +   facet_wrap(vars(month), ncol = 4) +   scale_colour_viridis_c() andalucia_2020 |>   mutate(month = lubridate::month(timestamp, label = TRUE)) |>   ggplot() +   geom_histogram(aes(x = precipitation)) +   facet_wrap(vars(month), ncol = 4) #> `stat_bin()` using `bins = 30`. Pick better value `binwidth`. #> Warning: Removed 21 rows containing non-finite outside the scale range #> (`stat_bin()`)."},{"path":"https://emf-creaf.github.io/meteospain/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Victor Granda. Author, maintainer. Miquel de Caceres. Contributor. Aitor Ameztegui. Contributor. Luis Franco. Contributor. Rubén Fernández-Casal. Contributor.","code":""},{"path":"https://emf-creaf.github.io/meteospain/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Granda V (2025). meteospain: Access Spanish Meteorological Stations Services. R package version 0.2.2, https://emf-creaf.github.io/meteospain/.","code":"@Manual{,   title = {meteospain: Access to Spanish Meteorological Stations Services},   author = {Victor Granda},   year = {2025},   note = {R package version 0.2.2},   url = {https://emf-creaf.github.io/meteospain/}, }"},{"path":"https://emf-creaf.github.io/meteospain/index.html","id":"meteospain","dir":"","previous_headings":"","what":"Access to Spanish Meteorological Stations Services","title":"Access to Spanish Meteorological Stations Services","text":"meteospain aims offer access different Spanish meteorological stations data uniform way.","code":""},{"path":"https://emf-creaf.github.io/meteospain/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Access to Spanish Meteorological Stations Services","text":"meteospain CRAN, can installed package: Also, meteospain active development. can install development version GitHub :","code":"install.packages('meteospain') # install.packages(\"remotes\") remotes::install_github(\"emf-creaf/meteospain\")"},{"path":"https://emf-creaf.github.io/meteospain/index.html","id":"services","dir":"","previous_headings":"","what":"Services","title":"Access to Spanish Meteorological Stations Services","text":"following meteorological stations services available: AEMET, Spanish State Meteorological Agency. MeteoCat, Catalan Meteorology Service. MeteoGalicia, Galician Meteorological Service. RIA, Andalucian Agroclimatic Information Network. Meteoclimatic, Spanish non-professional meteorological stations network.","code":""},{"path":"https://emf-creaf.github.io/meteospain/index.html","id":"examples","dir":"","previous_headings":"","what":"Examples","title":"Access to Spanish Meteorological Stations Services","text":"Access services done get_meteo_from function, providing name service options. service dedicated *service*_options() function guide specifics service: Stations info can accessed get_stations_info_from function: Returned objects spatial objects (using sf R package), results can plotted directly:","code":"library(meteospain)  mg_options <- meteogalicia_options(resolution = 'current_day') get_meteo_from('meteogalicia', mg_options) #> ℹ A información divulgada a través deste servidor ofrécese gratuitamente aos #>   cidadáns para que poida ser #> utilizada libremente por eles, co único compromiso de mencionar expresamente a #> MeteoGalicia e á #> Consellería de Medio Ambiente, Territorio e Vivenda da Xunta de Galicia como #> fonte da mesma cada vez #> que as utilice para os usos distintos do particular e privado. #> https://www.meteogalicia.gal/aviso-legal #> Simple feature collection with 3668 features and 17 fields #> Geometry type: POINT #> Dimension:     XY #> Bounding box:  xmin: -9.184586 ymin: 41.8982 xmax: -6.783357 ymax: 43.70426 #> Geodetic CRS:  WGS 84 #> # A tibble: 3,668 × 18 #>    timestamp           service station_id station_name station_province altitude #>    <dttm>              <chr>   <chr>      <chr>        <chr>                 [m] #>  1 2025-06-30 06:00:00 meteog… 10045      Mabegondo    A Coruña               94 #>  2 2025-06-30 06:00:00 meteog… 10046      Marco da Cu… A Coruña              651 #>  3 2025-06-30 06:00:00 meteog… 10047      Pedro Murias Lugo                   51 #>  4 2025-06-30 06:00:00 meteog… 10048      O Invernade… Ourense              1026 #>  5 2025-06-30 06:00:00 meteog… 10049      Corrubedo    A Coruña               30 #>  6 2025-06-30 06:00:00 meteog… 10050      CIS Ferrol   A Coruña               37 #>  7 2025-06-30 06:00:00 meteog… 10052      Muralla      A Coruña              661 #>  8 2025-06-30 06:00:00 meteog… 10053      Campus Lugo  Lugo                  400 #>  9 2025-06-30 06:00:00 meteog… 10055      Guitiriz-Mi… Lugo                  684 #> 10 2025-06-30 06:00:00 meteog… 10056      Marroxo      Lugo                  645 #> # ℹ 3,658 more rows #> # ℹ 12 more variables: temperature [°C], min_temperature [°C], #> #   max_temperature [°C], relative_humidity [%], precipitation [L/m^2], #> #   max_precipitation_hour [L/h/m^2], wind_direction [°], #> #   max_wind_direction [°], wind_speed [m/s], max_wind_speed [m/s], #> #   insolation [h], geometry <POINT [°]> get_stations_info_from('meteogalicia', mg_options) #> Simple feature collection with 154 features and 5 fields #> Geometry type: POINT #> Dimension:     XY #> Bounding box:  xmin: -9.184586 ymin: 41.8982 xmax: -6.783357 ymax: 43.7383 #> Geodetic CRS:  WGS 84 #> # A tibble: 154 × 6 #>    service      station_id station_name             station_province altitude #>  * <chr>        <chr>      <chr>                    <chr>                 [m] #>  1 meteogalicia 10157      Coruña-Torre de Hércules A Coruña               21 #>  2 meteogalicia 14000      Coruña-Dique             A Coruña                5 #>  3 meteogalicia 10045      Mabegondo                A Coruña               94 #>  4 meteogalicia 14003      Punta Langosteira        A Coruña                5 #>  5 meteogalicia 10144      Arzúa                    A Coruña              362 #>  6 meteogalicia 19005      Guísamo                  A Coruña              175 #>  7 meteogalicia 10095      Sergude                  A Coruña              231 #>  8 meteogalicia 10800      Camariñas                A Coruña                5 #>  9 meteogalicia 19001      Rus                      A Coruña              134 #> 10 meteogalicia 10147      Cariño                   A Coruña               20 #> # ℹ 144 more rows #> # ℹ 1 more variable: geometry <POINT [°]> library(sf) #> Linking to GEOS 3.13.1, GDAL 3.11.0, PROJ 9.6.0; sf_use_s2() is TRUE mg_options <- meteogalicia_options(resolution = 'daily', start_date = as.Date('2021-04-25')) plot(get_meteo_from('meteogalicia', mg_options)) #> ℹ A información divulgada a través deste servidor ofrécese gratuitamente aos #>   cidadáns para que poida ser #> utilizada libremente por eles, co único compromiso de mencionar expresamente a #> MeteoGalicia e á #> Consellería de Medio Ambiente, Territorio e Vivenda da Xunta de Galicia como #> fonte da mesma cada vez #> que as utilice para os usos distintos do particular e privado. #> https://www.meteogalicia.gal/aviso-legal #> Warning: plotting the first 9 out of 26 attributes; use max.plot = 26 to plot #> all plot(get_stations_info_from('meteogalicia', mg_options))"},{"path":"https://emf-creaf.github.io/meteospain/index.html","id":"api-keys","dir":"","previous_headings":"","what":"API keys","title":"Access to Spanish Meteorological Stations Services","text":"services, like AEMET Meteocat, require API key access data. meteospain doesn’t provide key services, see ?services_options information . key obtained, can get meteo:","code":"get_meteo_from('aemet', aemet_options(api_key = keyring::key_get(\"aemet\"))) #> ℹ © AEMET. Autorizado el uso de la información y su reproducción citando a #>   AEMET como autora de la misma. #> https://www.aemet.es/es/nota_legal #> Simple feature collection with 9376 features and 22 fields #> Geometry type: POINT #> Dimension:     XY #> Bounding box:  xmin: -18.115 ymin: 27.66667 xmax: 4.323889 ymax: 43.78621 #> Geodetic CRS:  WGS 84 #> # A tibble: 9,376 × 23 #>    timestamp           service station_id station_name station_province altitude #>  * <dttm>              <chr>   <chr>      <chr>        <chr>                 [m] #>  1 2025-06-30 17:00:00 aemet   0009X      ALFORJA      TARRAGONA             406 #>  2 2025-06-30 17:00:00 aemet   0016A      REUS  AEROP… <NA>                   71 #>  3 2025-06-30 17:00:00 aemet   0034X      VALLS        TARRAGONA             233 #>  4 2025-06-30 17:00:00 aemet   0042Y      TARRAGONA  … <NA>                   55 #>  5 2025-06-30 17:00:00 aemet   0061X      PONTONS      BARCELONA             632 #>  6 2025-06-30 17:00:00 aemet   0066X      VILAFRANCA … BARCELONA             177 #>  7 2025-06-30 17:00:00 aemet   0073X      SITGES  VAL… <NA>                   58 #>  8 2025-06-30 17:00:00 aemet   0076       BARCELONA  … <NA>                    4 #>  9 2025-06-30 17:00:00 aemet   0092X      BERGA  INST… <NA>                  682 #> 10 2025-06-30 17:00:00 aemet   0106X      BALSARENY    BARCELONA             361 #> # ℹ 9,366 more rows #> # ℹ 17 more variables: temperature_soil [°C], temperature_soil_20 [°C], #> #   temperature_soil_5 [°C], temperature [°C], temperature_dew_point [°C], #> #   min_temperature [°C], max_temperature [°C], relative_humidity [%], #> #   precipitation [L/m^2], wind_direction [°], max_wind_direction [°], #> #   max_wind_speed [m/s], wind_speed [m/s], insolation [h], #> #   atmospheric_pressure [hPa], snow_cover [cm], geometry <POINT [°]>"},{"path":"https://emf-creaf.github.io/meteospain/reference/clear_meteospain_cache.html","id":null,"dir":"Reference","previous_headings":"","what":"Clear all cached results — clear_meteospain_cache","title":"Clear all cached results — clear_meteospain_cache","text":"Reset internal cache used limit API requests.","code":""},{"path":"https://emf-creaf.github.io/meteospain/reference/clear_meteospain_cache.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Clear all cached results — clear_meteospain_cache","text":"","code":"clear_meteospain_cache()"},{"path":"https://emf-creaf.github.io/meteospain/reference/clear_meteospain_cache.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Clear all cached results — clear_meteospain_cache","text":"Cached results reduces number API requests, sometimes need fresh results without restarting R session. clear_meteospain_cache function reset cache actual R session.","code":""},{"path":"https://emf-creaf.github.io/meteospain/reference/get_meteo_from.html","id":null,"dir":"Reference","previous_headings":"","what":"Get meteorological stations data — get_meteo_from","title":"Get meteorological stations data — get_meteo_from","text":"Connect retrieve data AEMET, SMC Spanish meteorological stations services.","code":""},{"path":"https://emf-creaf.github.io/meteospain/reference/get_meteo_from.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get meteorological stations data — get_meteo_from","text":"","code":"get_meteo_from(   service = c(\"aemet\", \"meteocat\", \"meteoclimatic\", \"meteogalicia\", \"ria\"),   options )"},{"path":"https://emf-creaf.github.io/meteospain/reference/get_meteo_from.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get meteorological stations data — get_meteo_from","text":"service Character service name (lower case). options List needed service options. See services_options info different services options.","code":""},{"path":"https://emf-creaf.github.io/meteospain/reference/get_meteo_from.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get meteorological stations data — get_meteo_from","text":"sf (spatial) object stations meteorological data.","code":""},{"path":"https://emf-creaf.github.io/meteospain/reference/get_meteo_from.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Get meteorological stations data — get_meteo_from","text":"Depending service temporal resolution selected, variables present can change, services least temperature values.","code":""},{"path":"https://emf-creaf.github.io/meteospain/reference/get_meteo_from.html","id":"api-limits","dir":"Reference","previous_headings":"","what":"API limits","title":"Get meteorological stations data — get_meteo_from","text":"APIs limits terms data can retrieved one call. example, AEMET serves daily data 31 days one query. See vignette('api_limits', package = 'meteospain') detailed explanations limits ways retrieve longer periods.","code":""},{"path":"https://emf-creaf.github.io/meteospain/reference/get_meteo_from.html","id":"cache","dir":"Reference","previous_headings":"","what":"Cache","title":"Get meteorological stations data — get_meteo_from","text":"avoid unnecessary API calls (especially rate-limited APIs), results cached memory cache_mem object. cache limited actual R session invalidates 24h. Temporal resolutions daily cached, change often. cache can cleared clear_meteospain_cache.","code":""},{"path":"https://emf-creaf.github.io/meteospain/reference/get_meteo_from.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get meteorological stations data — get_meteo_from","text":"","code":"if (FALSE) { # interactive()   library(meteospain)   library(keyring)    # AEMET (we need a key)   # key_set('aemet')   options_for_aemet <- aemet_options(     'daily',     start_date = as.Date('2012-01-16'),     end_date = as.Date('2012-01-31'),     api_key = key_get('aemet')   )   get_meteo_from('aemet', options_for_aemet) }"},{"path":"https://emf-creaf.github.io/meteospain/reference/get_quota_from.html","id":null,"dir":"Reference","previous_headings":"","what":"Get api quota info — get_quota_from","title":"Get api quota info — get_quota_from","text":"Obtain info API quota used","code":""},{"path":"https://emf-creaf.github.io/meteospain/reference/get_quota_from.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get api quota info — get_quota_from","text":"","code":"get_quota_from(service = c(\"meteocat\"), options)"},{"path":"https://emf-creaf.github.io/meteospain/reference/get_quota_from.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get api quota info — get_quota_from","text":"service Character service name (lower case). options List needed service options. See services_options info different services options.","code":""},{"path":"https://emf-creaf.github.io/meteospain/reference/get_quota_from.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get api quota info — get_quota_from","text":"data frame quota info","code":""},{"path":"https://emf-creaf.github.io/meteospain/reference/get_quota_from.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Get api quota info — get_quota_from","text":"Depending service, APIs allows number data requests. function access user quota numbers services allow , (currently MeteoCat)","code":""},{"path":"https://emf-creaf.github.io/meteospain/reference/get_quota_from.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get api quota info — get_quota_from","text":"","code":"if (FALSE) { # interactive()   library(meteospain)   library(keyring)    # MeteoCat (we need a key)   # key_set('meteocat')   api_options <- meteocat_options(api_key = key_get('meteocat'))   get_quota_from('meteocat', api_options) }"},{"path":"https://emf-creaf.github.io/meteospain/reference/get_stations_info_from.html","id":null,"dir":"Reference","previous_headings":"","what":"Get meteorological stations info — get_stations_info_from","title":"Get meteorological stations info — get_stations_info_from","text":"Obtain info metadata available stations different services","code":""},{"path":"https://emf-creaf.github.io/meteospain/reference/get_stations_info_from.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get meteorological stations info — get_stations_info_from","text":"","code":"get_stations_info_from(   service = c(\"aemet\", \"meteocat\", \"meteoclimatic\", \"meteogalicia\", \"ria\"),   options )"},{"path":"https://emf-creaf.github.io/meteospain/reference/get_stations_info_from.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get meteorological stations info — get_stations_info_from","text":"service Character service name (lower case). options List needed service options. See services_options info different services options.","code":""},{"path":"https://emf-creaf.github.io/meteospain/reference/get_stations_info_from.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get meteorological stations info — get_stations_info_from","text":"sf (spatial) object stations metadata.","code":""},{"path":"https://emf-creaf.github.io/meteospain/reference/get_stations_info_from.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Get meteorological stations info — get_stations_info_from","text":"Depending service metadata available can different. Also, services offer info active stations (.e. AEMET), historical stations, mismatch can occur stations returned function stations returned get_meteo_from historical dates.","code":""},{"path":"https://emf-creaf.github.io/meteospain/reference/get_stations_info_from.html","id":"cache","dir":"Reference","previous_headings":"","what":"Cache","title":"Get meteorological stations info — get_stations_info_from","text":"avoid unnecessary API calls (especially rate-limited APIs), results cached memory cache_mem object. cache limited actual R session invalidates 24h. cache can cleared clear_meteospain_cache.","code":""},{"path":"https://emf-creaf.github.io/meteospain/reference/get_stations_info_from.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get meteorological stations info — get_stations_info_from","text":"","code":"if (FALSE) { # interactive()   library(meteospain)   library(keyring)    # AEMET (we need a key)   # key_set('aemet')   api_options <- aemet_options(api_key = key_get('aemet'))   get_stations_info_from('aemet', api_options) }"},{"path":"https://emf-creaf.github.io/meteospain/reference/services_options.html","id":null,"dir":"Reference","previous_headings":"","what":"Options for meteorological services — services_options","title":"Options for meteorological services — services_options","text":"Set options accessing different Spanish meteorological services","code":""},{"path":"https://emf-creaf.github.io/meteospain/reference/services_options.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Options for meteorological services — services_options","text":"","code":"aemet_options(   resolution = c(\"current_day\", \"daily\", \"monthly\", \"yearly\"),   start_date = Sys.Date(),   end_date = start_date,   stations = NULL,   api_key )  meteocat_options(   resolution = c(\"instant\", \"hourly\", \"daily\", \"monthly\", \"yearly\"),   start_date = Sys.Date(),   stations = NULL,   api_key )  meteoclimatic_options(resolution = c(\"current_day\"), stations = NULL)  meteogalicia_options(   resolution = c(\"instant\", \"current_day\", \"daily\", \"monthly\"),   start_date = Sys.Date(),   end_date = start_date,   stations = NULL )  ria_options(   resolution = c(\"daily\", \"monthly\"),   start_date = Sys.Date() - 1,   end_date = start_date,   stations = NULL )"},{"path":"https://emf-creaf.github.io/meteospain/reference/services_options.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Options for meteorological services — services_options","text":"resolution Character indicating temporal resolution data. Services allows different temporal resolutions can present (current_day, instant, daily, monthly). start_date Date class object start date start collecting data. Ignored resolution one current_day instant. end_date Date class object end date stop collecting data. default, date start_date. Ignored resolution one current_day instant. stations Character vector stations codes extract data . NULL (default) available stations returned. See Stations section details. api_key Character API key. NULL default services require keys. See API Keys section details.","code":""},{"path":"https://emf-creaf.github.io/meteospain/reference/services_options.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Options for meteorological services — services_options","text":"list service API options make query obtain data.","code":""},{"path":"https://emf-creaf.github.io/meteospain/reference/services_options.html","id":"resolution","dir":"Reference","previous_headings":"","what":"Resolution","title":"Options for meteorological services — services_options","text":"Temporal resolutions vary service service. Check \"Usage\" section see resolutions available service. Possible values : current_day returns last 24h measures. instant returns last measures available. hourly returns hourly measures. daily returns past date/s daily aggregation. monthly returns past date/s monthly aggregation. yearly returns past date/s yearly aggregation.","code":""},{"path":"https://emf-creaf.github.io/meteospain/reference/services_options.html","id":"keys","dir":"Reference","previous_headings":"","what":"Keys","title":"Options for meteorological services — services_options","text":"services (.e. AEMET, MeteoCat...) require API key access data. requirements process obtain key varies service service. AEMET: Visit https://opendata.aemet.es/centrodedescargas/inicio follow instructions \"Obtención de API Key\". MeteoCat: Visit https://apidocs.meteocat.gencat.cat/ follow instructions . advisable use keys directly script shared publicly available (github...), neither store plain text files. One option using keyring package managing accessing keys.","code":""},{"path":"https://emf-creaf.github.io/meteospain/reference/services_options.html","id":"stations","dir":"Reference","previous_headings":"","what":"Stations","title":"Options for meteorological services — services_options","text":"services accept querying multiple stations , allows one station per query: AEMET: One stations can provided character vector (except monthly yearly resolutions, accept one station. MeteoCat: One stations can provided character vector. MeteoGalicia: One stations can provided character vector. Meteoclimatic: one station can provided. Nevertheless, codes can used retrieve common group stations: \"ES\" Spanish stations, \"ESCAT\", \"ESCYL\", \"ESAND\"... different autonomous communities. RIA: API accepts one station. Nonetheless, internal loop performed retrieve stations provided","code":""},{"path":"https://emf-creaf.github.io/meteospain/reference/services_options.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Options for meteorological services — services_options","text":"","code":"if (FALSE) { # interactive()   library(keyring)   library(meteospain)    ## AEMET examples ---------------------------------------------------------    # setting the key (a prompt will appear in console to supply the API key)   # keyring::key_set(service = 'aemet')    # Options for the last 24h data   current_opts <- aemet_options(     resolution = 'current_day',     api = keyring::key_get('aemet')   )    # Options for daily data for January, 1990   daily_opts <- aemet_options(     resolution = 'daily',     start_date = as.Date('1990-01-01'),     end_date = as.Date('1990-01-15'),     api = keyring::key_get('aemet')   ) } if (FALSE) { # interactive()   ## MeteoCat examples -----------------------------------------------------------    # setting the key (a prompt will appear in console to supply the API key)   # keyring::key_set(service = 'meteocat')    # create the options   query_options <- meteocat_options(     resolution = 'hourly',     start_date = as.Date('2020-12-31'),     api = keyring::key_get('meteocat')   ) }  ## Meteoclimatic examples -------------------------------------------------  current_opts <- meteoclimatic_options() # same as before, but more verbose current_opts <- meteoclimatic_options(resolution = 'current_day', stations = 'ES')   ## MeteoGalicia examples --------------------------------------------------  # Options for the last measured data instant_opts <- meteogalicia_options(resolution = 'instant')  # Options for the last 24h data current_opts <- meteogalicia_options(resolution = 'current_day') # same, with stations current_opts <- meteogalicia_options('current_day', stations = c('10045', '10046'))  # Options for daily data for January, 2000 daily_opts <- meteogalicia_options(   resolution = 'daily',   start_date = as.Date('2000-01-01'),   end_date = as.Date('2000-01-31') )  # Options for monthly data for year 2000 monthly_opts <- meteogalicia_options(   resolution = 'monthly',   start_date = as.Date('2000-01-01'),   end_date = as.Date('2000-12-31') )  if (FALSE) { # interactive()   library(keyring)   library(meteospain)    ## RIA examples ---------------------------------------------------------    # Options for daily data for April, 2020   daily_opts <- ria_options(     resolution = 'daily',     start_date = as.Date('2020-04-01'),     end_date = as.Date('2020-04-30')   ) }"},{"path":"https://emf-creaf.github.io/meteospain/news/index.html","id":"meteospain-022","dir":"Changelog","previous_headings":"","what":"meteospain 0.2.2","title":"meteospain 0.2.2","text":"Fixed bug instant data failed stations without 2m wind data. Better API messages parsing Removed fix ssl level linux machines aemet now offers latest certs","code":""},{"path":"https://emf-creaf.github.io/meteospain/news/index.html","id":"meteospain-021","dir":"Changelog","previous_headings":"","what":"meteospain 0.2.1","title":"meteospain 0.2.1","text":"CRAN release: 2025-07-01 Updated variables returned (data complete) temporal scales focus atmospheric pressure (#19, #27, #28) new cache reduces significantly API calls, especially meteocat (#29). new cache avoids caching temporal resolutions daily, data changes API calls (#29). Updated variables returned temporal resolutions. Now possible variables returned (#28). timestamp values now floored accordingly temporal resolution (#30) Updated API errors managing. Retry number curl error occurs increased 2. Also added 0.4 seconds wait API calls.","code":""},{"path":"https://emf-creaf.github.io/meteospain/news/index.html","id":"meteospain-020","dir":"Changelog","previous_headings":"","what":"meteospain 0.2.0","title":"meteospain 0.2.0","text":"CRAN release: 2024-10-17 Updated variables returned instant hourly scales. Now possible variables returned (#27). Updated docs examples reflect new API limit, 15 days daily scale instead 30 (#25). Added relative humidity vars daily scale (#26). Fixed domain new API (#24).","code":""},{"path":"https://emf-creaf.github.io/meteospain/news/index.html","id":"meteospain-014","dir":"Changelog","previous_headings":"","what":"meteospain 0.1.4","title":"meteospain 0.1.4","text":"CRAN release: 2023-12-19 RIA API: Fixed bug coordinates processing decimal, @rubenfcasal (#20)","code":""},{"path":"https://emf-creaf.github.io/meteospain/news/index.html","id":"meteospain-013","dir":"Changelog","previous_headings":"","what":"meteospain 0.1.3","title":"meteospain 0.1.3","text":"CRAN release: 2023-10-18 meteocat API: new data limits, now daily data can retrieved starting 1989","code":""},{"path":"https://emf-creaf.github.io/meteospain/news/index.html","id":"meteospain-012","dir":"Changelog","previous_headings":"","what":"meteospain 0.1.2","title":"meteospain 0.1.2","text":"CRAN release: 2023-03-22 Added monthly yearly temporal resolutions AEMET service Removed dependency (exports) magrittr. Substituted magrittr pipes (%>%) native pipes (|>) Removed dependency crayon. Using cli now. Added cli manage communication user (messages, warnings errors) Improved tests AEMET API: return always variables (depending resolution). variable doesn’t exists station date, created NA. AEMET API: insolation variable added returned AEMET current data RIA API: improved messages meteogalicia API: improved error managing meteogalicia API: improved path creation Code cleaning (removing old code, fixing typos, code style…)","code":""},{"path":"https://emf-creaf.github.io/meteospain/news/index.html","id":"meteospain-011","dir":"Changelog","previous_headings":"","what":"meteospain 0.1.1","title":"meteospain 0.1.1","text":"CRAN release: 2023-02-14 Fixed bug AEMET coordinates (#18) Minimal versions dplyr purrr added (1.0.0) Lambda functions new r base syntax (\\(x) {})","code":""},{"path":"https://emf-creaf.github.io/meteospain/news/index.html","id":"meteospain-010","dir":"Changelog","previous_headings":"","what":"meteospain 0.1.0","title":"meteospain 0.1.0","text":"CRAN release: 2023-01-17 Substitute .data calls \"variable_name\" recommended tidyselect deprecation .data Fixed new meteogalicia API @dataleteo (#13)","code":""},{"path":"https://emf-creaf.github.io/meteospain/news/index.html","id":"meteospain-004","dir":"Changelog","previous_headings":"","what":"meteospain 0.0.4","title":"meteospain 0.0.4","text":"CRAN release: 2022-05-25 Minor improvements vignettes Added units solar_radiation RIA service Added curl dependency. Now can check connection querying API. Added safe versions httr::GET xml2::read_xml. API reachable, error caught. Tests aemet meteocat use now env backend keyring Fixed parsing dates meteoclimatic make independent system’s locale Fixed tidy error retrieving MeteoCat data 2008 2010 (#11) Limited dates meteocat_options dates available API (2008 greater) Fixed lack station_province aemet stations info (#10)","code":""},{"path":"https://emf-creaf.github.io/meteospain/news/index.html","id":"meteospain-003","dir":"Changelog","previous_headings":"","what":"meteospain 0.0.3","title":"meteospain 0.0.3","text":"CRAN release: 2021-11-05 Package now comply CRAN policy “Packages use Internet resources fail gracefully informative message resource available changed” Fixed checks debian-clang OS Memoization added get_meteo_from get_stations_info_from functions, avoid excessive calls APIs","code":""},{"path":"https://emf-creaf.github.io/meteospain/news/index.html","id":"meteospain-002","dir":"Changelog","previous_headings":"","what":"meteospain 0.0.2","title":"meteospain 0.0.2","text":"CRAN release: 2021-10-25 Fixed bug (#9) managing 429 errors meteocat aemet Added RIA (Red de Información Agroclimática de Andalucía) service Better error MeteoGalicia stations info return columns needed","code":""},{"path":"https://emf-creaf.github.io/meteospain/news/index.html","id":"meteospain-001","dir":"Changelog","previous_headings":"","what":"meteospain 0.0.1","title":"meteospain 0.0.1","text":"Initial version package","code":""},{"path":"https://emf-creaf.github.io/meteospain/news/index.html","id":"meteospain-0009000","dir":"Changelog","previous_headings":"","what":"meteospain 0.0.0.9000","title":"meteospain 0.0.0.9000","text":"Added NEWS.md file track changes package. Services added: AEMET, MeteoCat, MeteoGalicia, Meteoclimatic. Initial version package.","code":""}]
